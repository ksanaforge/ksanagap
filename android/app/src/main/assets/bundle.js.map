{
  "version": 3,
  "sources": [
    "..\\..\\Users\\cheahshen\\AppData\\Roaming\\npm\\node_modules\\ksana-cli\\node_modules\\browserify\\node_modules\\browser-pack\\_prelude.js",
    "index.js",
    "src\\actions.js",
    "src\\banner.js",
    "src\\downloader.js",
    "src\\installedapp.js",
    "src\\main.jsx",
    "src\\onlineapp.js",
    "src\\rawgitapp.js",
    "src\\stores.js",
    "..\\node_modules\\ksana2015-swipe\\index.js",
    "..\\node_modules\\ksana2015-swipe\\swipe.js",
    "..\\node_modules\\ksana2015-webruntime\\checkbrowser.js",
    "..\\node_modules\\ksana2015-webruntime\\downloader.js",
    "..\\node_modules\\ksana2015-webruntime\\fileinstaller.js",
    "..\\node_modules\\ksana2015-webruntime\\html5fs.js",
    "..\\node_modules\\ksana2015-webruntime\\htmlfs.js",
    "..\\node_modules\\ksana2015-webruntime\\index.js",
    "..\\node_modules\\ksana2015-webruntime\\installkdb.js",
    "..\\node_modules\\ksana2015-webruntime\\kfs.js",
    "..\\node_modules\\ksana2015-webruntime\\kfs_html5.js",
    "..\\node_modules\\ksana2015-webruntime\\ksanagap.js",
    "..\\node_modules\\ksana2015-webruntime\\livereload.js",
    "..\\node_modules\\ksana2015-webruntime\\liveupdate.js",
    "..\\node_modules\\ksana2015-webruntime\\mkdirp.js",
    "..\\node_modules\\reflux\\node_modules\\eventemitter3\\index.js",
    "..\\node_modules\\reflux\\src\\ActionMethods.js",
    "..\\node_modules\\reflux\\src\\Keep.js",
    "..\\node_modules\\reflux\\src\\ListenerMethods.js",
    "..\\node_modules\\reflux\\src\\ListenerMixin.js",
    "..\\node_modules\\reflux\\src\\PublisherMethods.js",
    "..\\node_modules\\reflux\\src\\StoreMethods.js",
    "..\\node_modules\\reflux\\src\\bindMethods.js",
    "..\\node_modules\\reflux\\src\\connect.js",
    "..\\node_modules\\reflux\\src\\createAction.js",
    "..\\node_modules\\reflux\\src\\createStore.js",
    "..\\node_modules\\reflux\\src\\index.js",
    "..\\node_modules\\reflux\\src\\joins.js",
    "..\\node_modules\\reflux\\src\\listenTo.js",
    "..\\node_modules\\reflux\\src\\listenToMany.js",
    "..\\node_modules\\reflux\\src\\utils.js"
  ],
  "names": [],
  "mappings": "AAAA;ACAA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrOA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "var runtime=require(\"ksana2015-webruntime\");\r\nruntime.boot(\"installer2015\",function(){\r\n\tvar Main=React.createElement(require(\"./src/main.jsx\"));\r\n\tksana.mainComponent=React.render(Main,document.getElementById(\"main\"));\r\n});",
    "var actions=require(\"reflux\").createActions([\r\n\t\"fetchOnlineApp\",\r\n\t\"fetchInstalledApp\",\r\n\t\"fetchRawgit\",\r\n\t\"fetchKsanajs\",\r\n\t\"checkHasUpdate\"\r\n]);\r\n\r\nmodule.exports=actions;",
    "/** @jsx React.DOM */\r\n\r\n/* to rename the component, change name of ./component.js and  \"dependencies\" section of ../../component.js */\r\n\r\n//var othercomponent=Require(\"other\"); \r\nvar banner = React.createClass({displayName: \"banner\",\r\n  getInitialState: function() {\r\n    return {};\r\n  },\r\n  propTypes:{\r\n    image:React.PropTypes.string.isRequired\r\n  },\r\n  imageNotFound:function() {\r\n    this.refs.banner.getDOMNode().src=\"banner.png\";\r\n  },\r\n  imgclick:function() {\r\n    if (this.props.action) this.props.action(\"bannerclick\");\r\n  },\r\n  render: function() {\r\n    return (\r\n      React.createElement(\"div\", null, \r\n        React.createElement(\"img\", {onClick: this.imgclick, ref: \"banner\", className: \"banner\", src: this.props.image, \r\n        onError: this.imageNotFound})\r\n      )\r\n    );\r\n  }\r\n});\r\nmodule.exports=banner;",
    "/** @jsx React.DOM */\r\n\r\n/* to rename the component, change name of ./component.js and  \"dependencies\" section of ../../component.js */\r\n\r\nvar liveupdate=require(\"ksana2015-webruntime\").liveupdate; \r\n\r\nvar Downloader = React.createClass({displayName: \"Downloader\",\r\n\tgetInitialState: function() {\r\n\t\treturn {downloading:false,downloadedByte:0};\r\n\t},\r\n\tpropTypes:{\r\n\t\taction:React.PropTypes.func.isRequired\r\n\t},\r\n\ttotalDownloadByte:function() {\r\n\t\t//app to be updated has newfilesize\r\n\t\t//new app only has filesizes\r\n\t\tvar filesizes=this.props.app.newfilesizes || this.props.app.filesizes;\r\n\t\tvar total=filesizes.reduce(function(p,c){return p+c},0);\r\n\t\treturn total;\r\n\t},\r\n\thumanSize:function() {\r\n\t\treturn liveupdate.humanFileSize(this.totalDownloadByte(),true);\r\n\t},\r\n\thumanDate:function() {\r\n\t\treturn liveupdate.humanDate(this.props.app.date);\r\n\t},\r\n\tremainHumanSize:function() {\r\n\t\tvar remain=this.totalDownloadByte()-this.state.downloadedByte;\r\n\t\treturn liveupdate.humanFileSize(remain,true);\r\n\t},\r\n\tbackFromDownload:function() {\r\n\t\tthis.props.action(\"cancelDownload\");\r\n\t},\r\n\tupdateStatus:function() {\r\n\t\tvar status=liveupdate.status();\r\n\t\tvar files=this.props.app.newfiles || this.props.app.files;\r\n\t\tthis.setState({nfile:status.nfile, filename: files[status.nfile], downloadedByte :status.downloadedByte });\r\n\t\tif (status.done) {\r\n\t\t\tclearInterval(this.timer1);\r\n\t\t\tthis.setState({downloading:false,done:status.done});\r\n\t\t}\r\n\t},\r\n\tstartDownload:function() {\r\n\t\tthis.starttime=new Date();\r\n\t\tliveupdate.start( this.props.app, function(success){\r\n\t\t\tif (success) {\r\n\t\t\tthis.setState({downloading:true});\r\n\t\t\tthis.timer1=setInterval(this.updateStatus.bind(this), 1000);\r\n\t\t\t}\r\n\t\t},this);\r\n\t},\r\n\tcancelDownload:function() {\r\n\t\tclearInterval(this.timer1);\r\n\t\tliveupdate.cancel();\r\n\t\tthis.setState({downloading:false});\r\n\t},\r\n\trenderDownloading:function() {\r\n\t\tvar percent= Math.floor(100*(this.state.downloadedByte  / this.totalDownloadByte() ));\r\n\t\tvar elapse=((new Date() - this.starttime)+1)/1000;\r\n\t\tvar speed= (this.state.downloadedByte/ elapse)  ; //bytes per millisecond\r\n\t\tvar bps=liveupdate.humanFileSize(speed,true);\r\n\t\tvar remain=this.totalDownloadByte()-this.state.downloadedByte;\r\n\t\tvar remaintime= Math.round((remain / speed));\r\n\t\treturn (\r\n\t\tReact.createElement(\"div\", null, \r\n\t\t\tReact.createElement(\"div\", {className: \"col-sm-offset-2 col-sm-8\"}, \r\n\t\t\t\tReact.createElement(\"div\", null, \"Downloading \", this.props.app.title, React.createElement(\"br\", null)), \r\n\t\t\t\tReact.createElement(\"div\", {className: \"progress\"}, \r\n\t\t\t\tReact.createElement(\"div\", {className: \"progress-bar\", style: {\"width\": percent+\"%\"}}, percent, \"%\")\r\n\t\t\t\t), \r\n\t\t\t\tReact.createElement(\"div\", null, \"Remaining bytes: \", this.remainHumanSize()), \r\n\t\t\t\tReact.createElement(\"div\", null, \"Speed: \", bps, \" per second\"), \r\n\t\t\t\tReact.createElement(\"div\", null, \"Remaining time: \", remaintime, \" seconds\", React.createElement(\"br\", null), React.createElement(\"hr\", null))\r\n\t\t\t), \r\n\t\t\tReact.createElement(\"div\", null, \r\n\t\t\t\tReact.createElement(\"div\", {className: \"col-sm-offset-4 col-sm-4\"}, \r\n\t\t\t\tReact.createElement(\"a\", {onClick: this.cancelDownload, className: \"btn btn-danger center-block\"}, \"Cancel Download\")\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t)\r\n\t\t);\r\n\t},\r\n\tcandownload:function() {\r\n\t\tif (typeof ksanagap.runtime==\"string\") return true;//old format\r\n\t\t\r\n\t\tvar tooold= (this.props.app.minruntime && this.props.app.minruntime>ksanagap.runtime_version);\r\n\t\tif (tooold) return React.createElement(\"span\", null, \"Accelon version too old, please update\") ;\r\n\t\telse return React.createElement(\"a\", {onClick: this.startDownload, className: \"center-block btn btn-primary btn-lg\"}, \"Download\") ;\r\n\t},  \r\n\trenderAsking:function() {\r\n\t\treturn (\r\n\t\t\tReact.createElement(\"div\", null, \r\n\t\t\tReact.createElement(\"a\", {onClick: this.backFromDownload, className: \"btn btn-warning\"}, \"Back\"), React.createElement(\"br\", null), \r\n\t\t\tthis.props.app.title, \" (\", this.props.app.dbid, \")\", React.createElement(\"br\", null), \n\t\t\t\"Build Date:\", this.humanDate(), React.createElement(\"br\", null), \n\t\t\t\"Description: \", this.props.app.description, React.createElement(\"br\", null), \n\t\t\t\"Download Size: \", React.createElement(\"span\", null, this.humanSize()), React.createElement(\"br\", null), \r\n\t\t\tReact.createElement(\"div\", null, \r\n\t\t\t\tReact.createElement(\"div\", null, \r\n\t\t\t\t\tReact.createElement(\"div\", {className: \"col-sm-offset-4 col-sm-4\"}, this.candownload())\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t\t\r\n\t\t\t)\r\n\t\t);\r\n\t},\r\n\topenapp:function() {\r\n\t\tksanagap.switchApp(this.props.app.dbid);\r\n\t},\r\n\trenderDone:function() {\r\n\t\treturn (\r\n\t\t\tReact.createElement(\"div\", null, \r\n\t\t\tReact.createElement(\"a\", {onClick: this.backFromDownload, className: \"btn btn-warning\"}, \"Back\"), React.createElement(\"br\", null), \r\n\r\n\t\t\tReact.createElement(\"div\", null, \"Download Completed \", this.props.app.title), \r\n\t\t\tReact.createElement(\"div\", null, \"Status : \", this.state.done, \" \"), \r\n\t\t\tReact.createElement(\"div\", {className: \"col-sm-offset-4 col-sm-4\"}, \r\n\t\t\t\tReact.createElement(\"a\", {onClick: this.openapp, className: \"btn btn-success btn-lg center-block\"}, \"Open \", this.props.app.dbid), React.createElement(\"br\", null)\r\n\t\t\t)\r\n\t\t\t)\r\n\t\t);\r\n\t},\r\n\trender: function() {\r\n\t\tif (this.state.done) {\r\n\t\t\treturn this.renderDone();\r\n\t\t} else if (this.state.downloading) {\r\n\t\t\treturn this.renderDownloading();\r\n\t\t} else {\r\n\t\t\treturn this.renderAsking();\r\n\t\t}\r\n\t}\r\n});\r\nmodule.exports=Downloader;",
    "var Reflux=require(\"reflux\");\r\nvar actions=require(\"./actions\");\r\nvar store=require(\"./stores\").installed;\r\nvar updatables=require(\"./stores\").updatables;\r\nvar Banner=require(\"./banner\");\r\nvar InstalledApp=React.createClass({displayName: \"InstalledApp\",\r\n\tgetInitialState:function(){\r\n\t\treturn {installed:[], message:\"\",selected:0, image:\"banner.png\",ready:false}\r\n\t},\r\n\tmixins:[Reflux.listenTo(store,\"onData\"),Reflux.listenTo(updatables,\"onUpdatablesChanged\")],\r\n\tonData:function(installed) {\r\n\t\tthis.setState({installed:installed,ready:true});\r\n\r\n\t\tif (installed&&installed.length) setTimeout(actions.checkHasUpdate,10000);\r\n\t},\r\n\tpropTypes:{\r\n\t\taction:React.PropTypes.func.isRequired\r\n\t},\r\n\tselect:function(e) {\r\n\t\tvar target=e.target;\r\n\t\twhile (target && target.nodeName!=\"TR\")target=target.parentElement;\r\n\t\tthis.setState({selected:target.dataset.i,deletable:false,showextra:false});\r\n\t\tvar dbid=this.state.installed[target.dataset.i].dbid;\r\n\t\tthis.setState({image:\"../\"+dbid+\"/banner.png\",dbid:dbid});\r\n\t\tclearTimeout(this.timer);\r\n\t\tthis.timer=setTimeout(this.showExtraInfo,5000);\r\n\t\t\r\n\t},\r\n\tshowExtraInfo:function() {\r\n\t\t//if (ksana.platform==\"ios\" || ksana.platform==\"android\") {\r\n\t\tthis.setState({deletable:true,showextra:true});\r\n\t},\r\n\tcomponentDidMount:function() {\r\n\t\tactions.fetchInstalledApp();\r\n\t},\r\n\tdeleteApp:function(e) {\r\n\t\tvar path=e.target.dataset['path'];\r\n\t\tif (path && path!=\"installer\") {\r\n\t\t\tconsole.log(\"delete app\",path);\r\n\t\t\tif (kfs&&kfs.deleteApp){\r\n\t\t\t\tkfs.deleteApp(path);\r\n\t\t\t\tthis.deleting=true;\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tactions.fetchInstalledApp();\r\n\t\t\t\t\tthis.deleting=false;\r\n\t\t\t\t},2000);\r\n\t\t\t} \r\n\t\t}\r\n\t},\r\n\topendb:function(e) {\r\n\t\tif (this.deleting) return;\r\n\t\tthis.setState({deletable:false});\r\n\t\tvar path=e.target.dataset['path'];\r\n\t\tksanagap.switchApp(path);\r\n\t},\r\n\tonUpdatablesChanged:function(updatables) {\r\n\t\tthis.setState({installed:updatables});\r\n\t},\r\n\tdownload:function(e) {\r\n\t\tvar n=e.target.dataset['n'];\r\n\t\tvar ksanajs=this.state.installed[n];\r\n\t\tthis.props.action(\"startDownload\",ksanajs);\r\n\t},\r\n\trenderUpdateButton:function(item,idx) {\r\n\t\tif (item.hasUpdate) {\r\n\t\t\treturn React.createElement(\"a\", {\"data-n\": idx, onClick: this.download, className: \"btn btn-warning\"}, \"Update\")\r\n\t\t}\r\n\t},\r\n\trenderDeleteButton:function(item,idx) {\r\n\t\tif (idx==this.state.selected && this.state.deletable && item.path!=\"installer\") {\r\n\t\t\treturn React.createElement(\"a\", {\"data-path\": item.path, onClick: this.deleteApp, className: \"btn btn-danger pull-right\"}, \"Uninstall\")\r\n\t\t}\r\n\t},\r\n\trenderCaption:function(item,idx) {\r\n\t\tif (idx==this.state.selected) {\r\n\t\t\treturn React.createElement(\"button\", {title: item.version +\"-\"+ item.build, className: \"appbtn btn btn-primary\", \"data-path\": item.path, onClick: this.opendb}, item.title)\r\n\t\t} else { \r\n\t\t\t//https://github.com/facebook/react/issues/134\r\n\t\t\treturn React.createElement(\"a\", {href: \"#\", onClick: this.select}, item.title)\r\n\t\t}\r\n\t},\r\n\trenderItem:function(item,idx) {\r\n\t\tvar classes=\"installedtr\";\r\n\t\tif (item.path==\"installer\" && !item.hasUpdate) return React.createElement(\"div\", null);\r\n\t\tif (idx==this.state.selected) classes+=\" info\";\r\n\t\treturn (React.createElement(\"tr\", {\"data-i\": idx, onClick: this.select, key: \"i\"+idx, className: classes}, \r\n\t\t\tReact.createElement(\"td\", null, this.renderCaption(item,idx), \" \", this.renderUpdateButton(item,idx)), \r\n\t\t\tReact.createElement(\"td\", null, this.renderDeleteButton(item,idx))\r\n\t\t));\r\n\t},\r\n\tshowTitle:function() {\r\n\t\tif (this.state.installed.length<2) return \"Swipe right to install book.\";\r\n\t\treturn \"Select and click button to open.\";\r\n\t},\r\n\trenderAccelon:function() {\r\n\t//if (this.state.installed && this.state.installed.length<2)  \r\n\t\treturn ( React.createElement(\"footer\", {className: \"footer accelon text-center\"}, React.createElement(\"br\", null), React.createElement(\"br\", null), React.createElement(\"hr\", null), \n\t  \t\"Powered by \", React.createElement(\"a\", {onClick: this.goWebsite, href: \"#\"}, \"Accelon\"), \", Ksanaforge 2014\" \n\t  \t) );\r\n\t//else return <span></span>;\r\n\t},\r\n\tgoWebsite:function() {\r\n\t\twindow.open(\"http://accelon.github.io\");\r\n\t},\r\n\trenderWelcome:function() {\r\n\t\tif (this.state.installed.length<2 && this.state.ready) {\r\n\t\t\treturn React.createElement(\"div\", null, \r\n\t\t\tReact.createElement(\"img\", {className: \"swiperight\", src: \"swiperight.png\"})\r\n\t\t\t)\t\t\t\r\n\t\t} return null;\r\n\t},\r\n\trender:function() { \r\n\t\treturn React.createElement(\"div\", {className: \"panel panel-info\"}, \r\n\t\t  React.createElement(Banner, {image: this.state.image}), \r\n\t\t  React.createElement(\"div\", {className: \"panel-heading\"}, \r\n\t\t    React.createElement(\"h3\", {className: \"panel-title\"}, this.showTitle())\r\n\t\t  ), \r\n\t\t  React.createElement(\"div\", {className: \"panel-body installedapplist\"}, \r\n\t\t  \tthis.renderWelcome(), \r\n\t\t\tReact.createElement(\"table\", {className: \"table installed\"}, \r\n\t\t\t\tReact.createElement(\"tbody\", null, \r\n\t\t\t\tthis.state.installed.map(this.renderItem)\r\n\t\t\t\t)\r\n\t\t\t), \r\n\t\t\tthis.renderAccelon()\r\n\t\t  )\r\n\t\t)\r\n\t}\r\n\t\r\n});\r\nmodule.exports=InstalledApp;\r\n",
    "\r\nvar E=React.createElement;\r\nvar Swipe=require(\"ksana2015-swipe\");\r\nvar InstalledApp=require(\"./installedapp\");\r\nvar OnlineApp=require(\"./onlineapp\");\r\nvar RawgitApp=require(\"./rawgitapp\");\r\nvar Downloader=require(\"./downloader\");\r\nvar maincomponent = React.createClass({displayName: \"maincomponent\",\r\n  getInitialState:function() {\r\n  \treturn {downloading:false};\r\n  },\r\n  renderMobile:function() {\r\n     return (\r\n      E(\"div\", {className: \"main\"}, \r\n        E(Swipe, {ref: \"Swipe\", continuous: true, \r\n               transitionEnd: this.onTransitionEnd, \r\n               swipeStart: this.onSwipeStart, swipeEnd: this.onSwipeEnd}, \r\n        E(\"div\", {className: \"swipediv\"}, \r\n          React.createElement(InstalledApp, {action: this.action})\r\n        ), \r\n        E(\"div\", {className: \"swipediv\"}, \r\n          React.createElement(OnlineApp, {action: this.action})\r\n        ), \r\n        E(\"div\", {className: \"swipediv\"}, \r\n          React.createElement(RawgitApp, {action: this.action})\r\n        )\r\n        )\r\n      )\r\n      );\r\n  },\r\n  renderPC:function() {\r\n    return E(\"div\", {className: \"main\"}, \r\n        E(\"div\", {className: \"swipediv col-md-4\"}, \r\n          React.createElement(InstalledApp, {action: this.action})\r\n        ), \r\n        E(\"div\", {className: \"swipediv col-md-4\"}, \r\n          React.createElement(OnlineApp, {action: this.action})\r\n        ), \r\n        E(\"div\", {className: \"swipediv col-md-4\"}, \r\n          React.createElement(RawgitApp, {action: this.action})\r\n        )\r\n      )\r\n  },\r\n  renderList:function() {\r\n      if (ksanagap.platform==\"chrome\" || ksanagap.platform==\"node-webkit\") {\r\n        return this.renderPC();\r\n      } else {\r\n        return this.renderMobile();\r\n      }\r\n  },\r\n  action:function(type,app) {\r\n    if (type==\"startDownload\") {\r\n      this.setState({app:app,downloading:true});  \r\n    } else if (type==\"cancelDownload\") {\r\n      this.setState({app:null,downloading:false});\r\n    }\r\n  },\r\n  render: function() {  //main render routine\r\n    if (this.state.downloading) {\r\n      return React.createElement(\"div\", {className: \"main\"}, \r\n          React.createElement(Downloader, {app: this.state.app, action: this.action})\r\n        )\r\n    } else {\r\n      return this.renderList();\r\n    }\r\n  }\r\n\r\n});\r\nmodule.exports=maincomponent;",
    "var Reflux=require(\"reflux\");\r\nvar store=require(\"./stores\").online;\r\nvar downloadable=require(\"./stores\").downloadable;\r\nvar actions=require(\"./actions\");\r\nvar liveupdate=require(\"ksana2015-webruntime\").liveupdate;\r\n\r\nvar OnlineApp=React.createClass({displayName: \"OnlineApp\",\r\n\tmixins:[Reflux.listenTo(store,\"onData\"),Reflux.listenTo(downloadable,\"onDownloadable\")],\r\n\tpropTypes:{\r\n\t\taction:React.PropTypes.func.isRequired\r\n\t},\r\n\tgetInitialState:function() {\r\n\t\treturn {apps:[],message:\"Getting List\",selected:-1,downloadable:false};\r\n\t},\r\n\tonData:function(data){\r\n\t\tif (!data) {\r\n\t\t\tthis.setState({message:\"error fetching remote app list, check you network connection\"});\r\n\t\t} else {\r\n\t\t\tthis.setState({apps:data,message:\"\"});\r\n\t\t}\r\n\t},\r\n\tshowTitle:function() {\r\n\t\tif (!this.state.apps.length) return \"Getting online app\";\r\n\t\treturn \"Total \"+this.state.apps.length+\" books, Click To Install\";\r\n\t},\r\n\tonDownloadable:function(ksanajs){\r\n\t\tthis.setState({downloadable:true,ksanajs:ksanajs});\r\n\t},\r\n\tselect:function(e) {\r\n\t\tvar target=e.target;\r\n\t\twhile (target && target.nodeName!=\"TR\")target=target.parentElement;\r\n\t\tvar i=parseInt(target.dataset.i);\r\n\t\tif (i==this.state.selected) return ;\r\n\t\tvar app=this.state.apps[i];\r\n\t\tthis.setState({selected:i,downloadable:false});\r\n\t\tactions.fetchKsanajs(app);\r\n\t},\r\n\tdownload:function(e) {\r\n\t\tconsole.log(\"start download\",this.state.ksanajs);\r\n    \tthis.props.action(\"startDownload\",this.state.ksanajs);\r\n\t},\r\n\trenderInstallButton:function(item,idx) {\r\n\t\tif (idx==this.state.selected) {\r\n\t\t\tif (this.state.downloadable) {\r\n\t\t\t\tvar ksanajs=this.state.ksanajs;\r\n\t\t\t\tif (!ksanajs || !ksanajs.filesizes) return null;\r\n\t\t\t\tvar totalsize=ksanajs.filesizes.reduce(function(i,acc){return acc+i},0);\r\n\t\t\t\treturn React.createElement(\"div\", null, \r\n\t\t\t\tReact.createElement(\"a\", {\"data-n\": idx, onClick: this.download, className: \"btn btn-warning pull-right\"}, \"Install\"), \r\n\t\t\t\t\" \"+liveupdate.humanFileSize(totalsize,true)\r\n\t\t\t\t)\r\n\t\t\t} else {\r\n\t\t\t\treturn React.createElement(\"span\", null, \" fetching info\")\r\n\t\t\t}\r\n\t\t}else return null;\r\n\t},\r\n\trenderItem:function(item,idx) {\r\n\t\tvar classes=\"installedtr\";\r\n\t\tif (idx==this.state.selected) classes+=\" info\";\r\n\t\treturn (React.createElement(\"tr\", {\"data-i\": idx, onClick: this.select, key: \"i\"+idx, className: classes}, \r\n\t\t\tReact.createElement(\"td\", null, React.createElement(\"a\", {href: \"#\", onClick: this.select}, item.title), this.renderInstallButton(item,idx))\r\n\t\t));\r\n\t},\r\n\tdownloadingmessage:function() {\r\n\t\tif(!this.state.apps.length) return React.createElement(\"div\", null, \"Getting list\") \r\n\t\telse return React.createElement(\"div\", null)\r\n\t},\r\n\tcomponentDidMount:function() {\r\n\t\tactions.fetchOnlineApp();\r\n\t},\r\n\trender:function() {\r\n\t\treturn \tReact.createElement(\"div\", {className: \"panel panel-success\"}, \r\n\t\t  \t\tReact.createElement(\"div\", {className: \"panel-heading\"}, \r\n\t\t  \t\t  React.createElement(\"h3\", {className: \"panel-title\"}, this.showTitle())\r\n\t\t  \t\t), \r\n\t\t  \t\tReact.createElement(\"div\", {className: \"panel-body applist\"}, \r\n\t\t  \t\t\tthis.downloadingmessage(), \r\n\t\t  \t\t\tReact.createElement(\"table\", {className: \"table downloadable\"}, \r\n\t\t  \t\t\tReact.createElement(\"tbody\", null, \r\n\t\t\t\t\tthis.state.apps.map(this.renderItem)\r\n\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t  \t\t)\r\n\t\t\t)\r\n\t}\r\n});\r\nmodule.exports=OnlineApp;\r\n\r\n",
    "var Reflux=require(\"reflux\");\r\nvar actions=require(\"./actions\");\r\nvar store=require(\"./stores\").rawgit;\r\nvar liveupdate=require(\"ksana2015-webruntime\").liveupdate;\r\nvar RawgitApp=React.createClass({displayName: \"RawgitApp\",\r\n\tmixins:[Reflux.listenTo(store,\"onData\")],\r\n\tgetInitialState:function() {\r\n\t\tvar repouser=localStorage.getItem(\"repouser\") || \"ksanaforge\";\r\n\t\tvar reponame=localStorage.getItem(\"reponame\") || \"nanchuan\";\r\n\t\treturn {ksanajs:null,repouser:repouser,reponame:reponame,message:\"\"};\r\n\t},\r\n\tpropTypes:{\r\n\t\taction:React.PropTypes.func.isRequired\r\n\t},\r\n\tonData:function(ksanajs) {\r\n\t\t\r\n\t\tif (ksanajs) {\r\n\t\t\tthis.setState({ksanajs:ksanajs});\t\r\n\t\t} else {\r\n\t\t\tthis.setState({ksanajs:null,message:\"Invalid Repository.\"});\r\n\t\t}\r\n\t},\r\n\tgetksanajs:function() {\r\n\t\tvar repouser=this.refs.repouser.getDOMNode().value;\r\n\t\tvar reponame=this.refs.reponame.getDOMNode().value;\r\n\t\tthis.setState({message:\"fetching info\"});\r\n\t\tactions.fetchRawgit(repouser,reponame);\r\n\t},\r\n\tdownload:function() {\r\n\t\tthis.props.action(\"startDownload\",this.state.ksanajs);\r\n\t},\r\n\tappinfo:function() {\r\n\t\tif (!this.state.ksanajs) return React.createElement(\"div\", null, \r\n\t\t\tthis.state.message\r\n\t\t)\r\n\r\n\t\tvar ksana=this.state.ksanajs;\r\n\t\tif (!ksana || !ksana.filesizes)  return React.createElement(\"div\", null, \"Error ksana.js\")\r\n\t\tvar totalsize=ksana.filesizes.reduce(function(i,acc){return acc+i},0);\r\n\t\treturn React.createElement(\"div\", null, \r\n\t\t\t\tReact.createElement(\"table\", {className: \"table ksanainfo\"}, \r\n\t\t\t\t\tReact.createElement(\"tr\", null, React.createElement(\"td\", null, \"ID\"), React.createElement(\"td\", null, ksana.dbid)), \r\n\t\t\t\t\tReact.createElement(\"tr\", null, React.createElement(\"td\", null, \"Title\"), React.createElement(\"td\", null, ksana.title, \" \")), \r\n\t\t\t\t\tReact.createElement(\"tr\", null, React.createElement(\"td\", null, \"Date\"), React.createElement(\"td\", null, liveupdate.humanDate(ksana.date), \" \")), \r\n\t\t\t\t\tReact.createElement(\"tr\", null, React.createElement(\"td\", null, \"Size\"), React.createElement(\"td\", null, liveupdate.humanFileSize(totalsize,true)))\r\n\t\t\t\t), \r\n\t\t\t\tReact.createElement(\"div\", null, \r\n\t\t\tReact.createElement(\"button\", {onClick: this.download, className: \"input center-block btn btn-large btn-warning\"}, \"Install\"), React.createElement(\"br\", null)\r\n\t\t\t)\r\n\t\t)\r\n\t},\r\n\trender:function() {\r\n\t\treturn React.createElement(\"div\", {className: \"panel panel-warning\"}, \r\n\t\t\tReact.createElement(\"div\", {className: \"panel-heading\"}, \r\n\t\t\t\tReact.createElement(\"h3\", {className: \"panel-title\"}, \"Install from Github\")\r\n\t\t\t), \r\n\t\t\tReact.createElement(\"div\", {className: \"panel-body applist\"}, \n\t\t\t\"Owner:\", \n\t\t\tReact.createElement(\"input\", {className: \"input form-control\", ref: \"repouser\", defaultValue: this.state.repouser}), \n\t\t\t\"Repository Name:\", \n\t\t\tReact.createElement(\"input\", {className: \"input form-control\", ref: \"reponame\", defaultValue: this.state.reponame}), \r\n\t\t\tReact.createElement(\"div\", null, \r\n\t\t\t\tReact.createElement(\"button\", {onClick: this.getksanajs, \r\n\t\t\t\tclassName: \"input btn btn-large btn-primary center-block\"}, \"Get Info\")\r\n\t\t\t), \r\n\t\t\tthis.appinfo()\r\n\t\t\t)\r\n\t\t\t\r\n\t\t)\t\r\n\t}\r\n\t\r\n});\r\nmodule.exports=RawgitApp;",
    "var Reflux=require(\"reflux\");\r\nvar actions=require(\"./actions\");\r\nvar liveupdate=require(\"ksana2015-webruntime\").liveupdate;\r\nvar remoteapplistjs=\"http://accelon.github.io/applist.js\";\r\nvar downloaded_apps=[];\r\nvar findAppById=function(id) {\r\n  var r=downloaded_apps.filter(function(app) { return app.dbid==id}  );\r\n  if (r.length) return r[0];\r\n}\r\n\r\nvar store_installed=Reflux.createStore({\r\n\tlistenables: actions,\r\n\tonFetchInstalledApp:function() {\r\n      downloaded_apps=JSON.parse(kfs.listApps());\r\n      this.trigger(downloaded_apps);\r\n\t}\r\n});\r\n\r\nvar store_online=Reflux.createStore({\r\n\tlistenables: actions,\r\n\tonFetchOnlineApp:function() {\r\n\t\tvar that=this;\r\n\t\tconsole.log(\"jsonp\",remoteapplistjs);\r\n\t\tliveupdate.jsonp(remoteapplistjs,function(data){\r\n\t\t\tconsole.log(\"jsonp return from\",remoteapplistjs,data)\r\n\t\t\tthis.trigger(data||[]);\r\n\t\t},this);\r\n\t},\r\n});\r\nvar store_updatables = Reflux.createStore({\r\n    listenables: actions,\r\n    onCheckHasUpdate:function() {\r\n\r\n      liveupdate.getUpdatables(downloaded_apps,function(updatables){\r\n        for (var i=0;i<updatables.length;i++) {\r\n          var app=findAppById(updatables[i].dbid);\r\n          app.hasUpdate=true;\r\n          app.newfiles=updatables[i].newfiles;\r\n        }\r\n        this.trigger(downloaded_apps);\r\n      },this);\r\n    }\r\n})\r\nvar store_rawgit=Reflux.createStore({\r\n\tlistenables: [actions],\r\n\tonFetchRawgit:function(repouser,reponame) {\r\n\t\tvar url=\"http://rawgit.com/\"+repouser+\"/\"+reponame+\"/master/ksana.js\";\r\n\t\tvar that=this;\r\n\t\tconsole.log(\"jsonp\",url);\r\n\t\tliveupdate.jsonp(url,reponame,function(data){\r\n\t\t\tconsole.log(\"jsonp return from\",url,data)\r\n\t\t\tthis.trigger(data);\r\n\t\t},this);\r\n\t}\r\n});\r\n\r\nvar store_downloadable=Reflux.createStore({\r\n\tlistenables: [actions],\r\n\tonFetchKsanajs:function(remoteapp) {\r\n\t\tvar url=remoteapp.url+\"/ksana.js\";\r\n\t\tliveupdate.jsonp(url,remoteapp.appid,function(data){\r\n\t\t\tthis.trigger(data);\r\n\t\t},this);\r\n\t}\t\r\n});\r\n\r\n\r\nmodule.exports={installed:store_installed, online:store_online, \r\n\trawgit:store_rawgit,updatables:store_updatables,downloadable:store_downloadable};",
    "//taken from https://github.com/jed/react-swipe\r\nvar Swipe=require(\"./swipe\");\r\nvar styles = {\r\n  container: {\r\n    overflow: \"hidden\",\r\n    visibility: \"hidden\",\r\n    position: \"relative\"\r\n  },\r\n  wrapper: {\r\n    overflow: \"hidden\",\r\n    position: \"relative\"\r\n  },\r\n  child: {\r\n    float: \"left\",\r\n    width: \"100%\",\r\n    position: \"relative\"\r\n  }\r\n}\r\n\r\nvar SwipeComponent= React.createClass({\r\n  displayName: \"Swipe\",\r\n  // https://github.com/thebird/Swipe#config-options\r\n  propTypes: {\r\n    startSlide      : React.PropTypes.number,\r\n    speed           : React.PropTypes.number,\r\n    auto            : React.PropTypes.number,\r\n    continuous      : React.PropTypes.bool,\r\n    disableScroll   : React.PropTypes.bool,\r\n    stopPropagation : React.PropTypes.bool,\r\n    callback        : React.PropTypes.func,\r\n    transitionEnd   : React.PropTypes.func,\r\n    swipeStart      : React.PropTypes.func, //by yap\r\n    swipeEnd        : React.PropTypes.func\r\n  },\r\n  componentDidMount: function() {\r\n    this.swipe = Swipe(this.getDOMNode(), this.props);\r\n  },\r\n  componentWillUnmount: function() {\r\n    this.swipe.kill();\r\n    delete this.swipe;\r\n  },\r\n  render: function() {\r\n    var container = React.DOM.div(this.props,\r\n      React.DOM.div({style: styles.wrapper},\r\n        React.Children.map(this.props.children, function(child) {\r\n          return React.addons.cloneWithProps(child, {style: styles.child})\r\n        })\r\n      )\r\n    )\r\n    return React.addons.cloneWithProps(container, {style: styles.container})\r\n  }\r\n});\r\n\r\nmodule.exports = SwipeComponent;",
    "/*\r\n * Swipe 2.0\r\n *\r\n * Brad Birdsall\r\n * Copyright 2013, MIT License\r\n *\r\n*/\r\n\r\nmodule.exports = function Swipe(container, options) {\r\n\r\n  \"use strict\";\r\n\r\n  // utilities\r\n  var noop = function() {}; // simple no operation function\r\n  var offloadFn = function(fn) { setTimeout(fn || noop, 0) }; // offload a functions execution\r\n\r\n  // check browser capabilities\r\n  var browser = {\r\n    addEventListener: !!window.addEventListener,\r\n    touch: ('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch,\r\n    transitions: (function(temp) {\r\n      var props = ['transitionProperty', 'WebkitTransition', 'MozTransition', 'OTransition', 'msTransition'];\r\n      for ( var i in props ) if (temp.style[ props[i] ] !== undefined) return true;\r\n      return false;\r\n    })(document.createElement('swipe'))\r\n  };\r\n\r\n  // quit if no root element\r\n  if (!container) return;\r\n  var element = container.children[0];\r\n  var slides, slidePos, width, length;\r\n  options = options || {};\r\n  var index = parseInt(options.startSlide, 10) || 0;\r\n  var speed = options.speed || 300;\r\n  options.continuous = options.continuous !== undefined ? options.continuous : true;\r\n\r\n  var target=null; //yap to keep the domnode fires the swipe\r\n  function setup() {\r\n\r\n    // cache slides\r\n    slides = element.children;\r\n    length = slides.length;\r\n\r\n    // set continuous to false if only one slide\r\n    if (slides.length < 2) options.continuous = false;\r\n\r\n    //special case if two slides\r\n    if (browser.transitions && options.continuous && slides.length < 3) {\r\n      element.appendChild(slides[0].cloneNode(true));\r\n      element.appendChild(element.children[1].cloneNode(true));\r\n      slides = element.children;\r\n    }\r\n\r\n    // create an array to store current positions of each slide\r\n    slidePos = new Array(slides.length);\r\n\r\n    // determine width of each slide\r\n    width = container.getBoundingClientRect().width || container.offsetWidth;\r\n\r\n    element.style.width = (slides.length * width) + 'px';\r\n\r\n    // stack elements\r\n    var pos = slides.length;\r\n    while(pos--) {\r\n\r\n      var slide = slides[pos];\r\n\r\n      slide.style.width = width + 'px';\r\n      slide.setAttribute('data-index', pos);\r\n\r\n      if (browser.transitions) {\r\n        slide.style.left = (pos * -width) + 'px';\r\n        move(pos, index > pos ? -width : (index < pos ? width : 0), 0);\r\n      }\r\n\r\n    }\r\n\r\n    // reposition elements before and after index\r\n    if (options.continuous && browser.transitions) {\r\n      move(circle(index-1), -width, 0);\r\n      move(circle(index+1), width, 0);\r\n    }\r\n\r\n    if (!browser.transitions) element.style.left = (index * -width) + 'px';\r\n\r\n    container.style.visibility = 'visible';\r\n\r\n  }\r\n\r\n  function prev() {\r\n\r\n    if (options.continuous) slide(index-1);\r\n    else if (index) slide(index-1);\r\n\r\n  }\r\n\r\n  function next() {\r\n\r\n    if (options.continuous) slide(index+1);\r\n    else if (index < slides.length - 1) slide(index+1);\r\n\r\n  }\r\n\r\n  function circle(index) {\r\n\r\n    // a simple positive modulo using slides.length\r\n    return (slides.length + (index % slides.length)) % slides.length;\r\n\r\n  }\r\n\r\n  function slide(to, slideSpeed) {\r\n\r\n    // do nothing if already on requested slide\r\n    if (index == to) return;\r\n\r\n    if (browser.transitions) {\r\n\r\n      var direction = Math.abs(index-to) / (index-to); // 1: backward, -1: forward\r\n\r\n      // get the actual position of the slide\r\n      if (options.continuous) {\r\n        var natural_direction = direction;\r\n        direction = -slidePos[circle(to)] / width;\r\n\r\n        // if going forward but to < index, use to = slides.length + to\r\n        // if going backward but to > index, use to = -slides.length + to\r\n        if (direction !== natural_direction) to =  -direction * slides.length + to;\r\n\r\n      }\r\n\r\n      var diff = Math.abs(index-to) - 1;\r\n\r\n      // move all the slides between index and to in the right direction\r\n      while (diff--) move( circle((to > index ? to : index) - diff - 1), width * direction, 0);\r\n\r\n      to = circle(to);\r\n\r\n      move(index, width * direction, slideSpeed || speed);\r\n      move(to, 0, slideSpeed || speed);\r\n\r\n      if (options.continuous) move(circle(to - direction), -(width * direction), 0); // we need to get the next in place\r\n\r\n    } else {\r\n\r\n      to = circle(to);\r\n      animate(index * -width, to * -width, slideSpeed || speed);\r\n      //no fallback for a circular continuous if the browser does not accept transitions\r\n    }\r\n\r\n    index = to;\r\n    offloadFn(options.callback && options.callback(index, slides[index], target));\r\n  }\r\n\r\n  function move(index, dist, speed) {\r\n\r\n    translate(index, dist, speed);\r\n    slidePos[index] = dist;\r\n\r\n  }\r\n\r\n  function translate(index, dist, speed) {\r\n\r\n    var slide = slides[index];\r\n    var style = slide && slide.style;\r\n\r\n    if (!style) return;\r\n\r\n    style.webkitTransitionDuration =\r\n    style.MozTransitionDuration =\r\n    style.msTransitionDuration =\r\n    style.OTransitionDuration =\r\n    style.transitionDuration = speed + 'ms';\r\n\r\n    style.webkitTransform = 'translate(' + dist + 'px,0)' + 'translateZ(0)';\r\n    style.msTransform =\r\n    style.MozTransform =\r\n    style.OTransform = 'translateX(' + dist + 'px)';\r\n  }\r\n\r\n  function animate(from, to, speed) {\r\n    // if not an animation, just reposition\r\n    if (!speed) {\r\n      element.style.left = to + 'px';\r\n      return;\r\n    }\r\n    var start = +new Date;\r\n    var timer = setInterval(function() {\r\n      var timeElap = +new Date - start;\r\n      if (timeElap > speed) {\r\n        element.style.left = to + 'px';\r\n        if (delay) begin();\r\n        options.transitionEnd && options.transitionEnd.call(event, index, slides[index], target);\r\n        clearInterval(timer);\r\n        return;\r\n      }\r\n      element.style.left = (( (to - from) * (Math.floor((timeElap / speed) * 100) / 100) ) + from) + 'px';\r\n    }, 4);\r\n  }\r\n\r\n  // setup auto slideshow\r\n  var delay = options.auto || 0;\r\n  var interval;\r\n\r\n  function begin() {\r\n    interval = setTimeout(next, delay);\r\n  }\r\n\r\n  function stop() {\r\n    delay = 0;\r\n    clearTimeout(interval);\r\n  }\r\n\r\n  // setup initial vars\r\n  var start = {};\r\n  var delta = {};\r\n  var isScrolling;\r\n\r\n  // setup event capturing\r\n  var events = {\r\n    handleEvent: function(event) {\r\n      switch (event.type) {\r\n        case 'touchstart': this.start(event); break;\r\n        case 'touchmove': this.move(event); break;\r\n        case 'touchend': offloadFn(this.end(event)); break;\r\n        case 'webkitTransitionEnd':\r\n        case 'msTransitionEnd':\r\n        case 'oTransitionEnd':\r\n        case 'otransitionend':\r\n        case 'transitionend': offloadFn(this.transitionEnd(event)); break;\r\n        case 'resize': offloadFn(setup); break;\r\n      }\r\n      if (options.stopPropagation) event.stopPropagation();\r\n    },\r\n    start: function(event) {\r\n      target=event.target;//yap save the event target\r\n      var touches = event.touches[0];\r\n      // measure start values\r\n      start = {\r\n        // get initial touch coords\r\n        x: touches.pageX,\r\n        y: touches.pageY,\r\n        // store time to determine touch duration\r\n        time: +new Date\r\n      };\r\n      // used for testing first move event\r\n      isScrolling = undefined;\r\n      // reset delta and end measurements\r\n      delta = {};\r\n      // attach touchmove and touchend listeners\r\n      element.addEventListener('touchmove', this, false);\r\n      element.addEventListener('touchend', this, false);\r\n      if (options.swipeStart) options.swipeStart(target);\r\n\r\n    },\r\n    move: function(event) {\r\n      // ensure swiping with one touch and not pinching\r\n      if ( event.touches.length > 1 || event.scale && event.scale !== 1) return;\r\n      if (options.disableScroll) event.preventDefault();\r\n\r\n      var touches = event.touches[0];\r\n      // measure change in x and y\r\n      delta = {\r\n        x: touches.pageX - start.x,\r\n        y: touches.pageY - start.y\r\n      }\r\n      // determine if scrolling test has run - one time test\r\n      if ( typeof isScrolling == 'undefined') {\r\n        isScrolling = !!( isScrolling || Math.abs(delta.x) < Math.abs(delta.y) );\r\n      }\r\n      // if user is not trying to scroll vertically\r\n      if (!isScrolling) {\r\n        // prevent native scrolling\r\n        event.preventDefault();\r\n        // stop slideshow\r\n        stop();\r\n        // increase resistance if first or last slide\r\n        if (options.continuous) { // we don't add resistance at the end\r\n          translate(circle(index-1), delta.x + slidePos[circle(index-1)], 0);\r\n          translate(index, delta.x + slidePos[index], 0);\r\n          translate(circle(index+1), delta.x + slidePos[circle(index+1)], 0);\r\n        } else {\r\n          delta.x =\r\n            delta.x /\r\n              ( (!index && delta.x > 0               // if first slide and sliding left\r\n                || index == slides.length - 1        // or if last slide and sliding right\r\n                && delta.x < 0                       // and if sliding at all\r\n              ) ?\r\n              ( Math.abs(delta.x) / width + 1 )      // determine resistance level\r\n              : 1 );                                 // no resistance if false\r\n\r\n          // translate 1:1\r\n          translate(index-1, delta.x + slidePos[index-1], 0);\r\n          translate(index, delta.x + slidePos[index], 0);\r\n          translate(index+1, delta.x + slidePos[index+1], 0);\r\n        }\r\n      } else {\r\n        if (options.swipeEnd) options.swipeEnd(target);\r\n      }\r\n    },\r\n    end: function(event) {\r\n      // measure duration\r\n      var duration = +new Date - start.time;\r\n      // determine if slide attempt triggers next/prev slide\r\n      var isValidSlide =\r\n            Number(duration) < 250               // if slide duration is less than 250ms\r\n            && Math.abs(delta.x) > 20            // and if slide amt is greater than 20px\r\n            || Math.abs(delta.x) > width/2;      // or if slide amt is greater than half the width\r\n\r\n      // determine if slide attempt is past start and end\r\n      var isPastBounds =\r\n            !index && delta.x > 0                            // if first slide and slide amt is greater than 0\r\n            || index == slides.length - 1 && delta.x < 0;    // or if last slide and slide amt is less than 0\r\n\r\n      if (options.continuous) isPastBounds = false;\r\n      // determine direction of swipe (true:right, false:left)\r\n      var direction = delta.x < 0;\r\n      // if not scrolling vertically\r\n      if (!isScrolling) {\r\n        if (isValidSlide && !isPastBounds) {\r\n          if (direction) {\r\n            if (options.continuous) { // we need to get the next in this direction in place\r\n              move(circle(index-1), -width, 0);\r\n              move(circle(index+2), width, 0);\r\n            } else {\r\n              move(index-1, -width, 0);\r\n            }\r\n            move(index, slidePos[index]-width, speed);\r\n            move(circle(index+1), slidePos[circle(index+1)]-width, speed);\r\n            index = circle(index+1);\r\n          } else {\r\n            if (options.continuous) { // we need to get the next in this direction in place\r\n              move(circle(index+1), width, 0);\r\n              move(circle(index-2), -width, 0);\r\n            } else {\r\n              move(index+1, width, 0);\r\n            }\r\n            move(index, slidePos[index]+width, speed);\r\n            move(circle(index-1), slidePos[circle(index-1)]+width, speed);\r\n            index = circle(index-1);\r\n          }\r\n          options.callback && options.callback(index, slides[index], target);\r\n        } else {\r\n          if (options.continuous) {\r\n            move(circle(index-1), -width, speed);\r\n            move(index, 0, speed);\r\n            move(circle(index+1), width, speed);\r\n          } else {\r\n            move(index-1, -width, speed);\r\n            move(index, 0, speed);\r\n            move(index+1, width, speed);\r\n          }\r\n        }\r\n      }\r\n      if (options.swipeEnd) options.swipeEnd(target);\r\n      // kill touchmove and touchend event listeners until touchstart called again\r\n      element.removeEventListener('touchmove', events, false)\r\n      element.removeEventListener('touchend', events, false)\r\n    },\r\n    transitionEnd: function(event) {\r\n      if (parseInt(event.target.getAttribute('data-index'), 10) == index) {\r\n        if (delay) begin();\r\n        options.transitionEnd && options.transitionEnd.call(event, index, slides[index],target);\r\n      }\r\n    }\r\n  }\r\n  // trigger setup\r\n  setup();\r\n  // start auto slideshow if applicable\r\n  if (delay) begin();\r\n  // add event listeners\r\n  if (browser.addEventListener) {\r\n    // set touchstart event on element\r\n    if (browser.touch) element.addEventListener('touchstart', events, false);\r\n\r\n    if (browser.transitions) {\r\n      element.addEventListener('webkitTransitionEnd', events, false);\r\n      element.addEventListener('msTransitionEnd', events, false);\r\n      element.addEventListener('oTransitionEnd', events, false);\r\n      element.addEventListener('otransitionend', events, false);\r\n      element.addEventListener('transitionend', events, false);\r\n    }\r\n    // set resize event on window\r\n    window.addEventListener('resize', events, false);\r\n  } else {\r\n    window.onresize = function () { setup() }; // to play nice with old IE\r\n  }\r\n  // expose the Swipe API\r\n  return {\r\n    setup: function() {\r\n      setup();\r\n    },\r\n    slide: function(to, speed) {\r\n      // cancel slideshow\r\n      stop();\r\n      slide(to, speed);\r\n    },\r\n    prev: function() {\r\n      // cancel slideshow\r\n      stop();\r\n      prev();\r\n    },\r\n    next: function() {\r\n      // cancel slideshow\r\n      stop();\r\n      next();\r\n    },\r\n    stop: function() {\r\n      // cancel slideshow\r\n      stop();\r\n    },\r\n    getPos: function() {\r\n      // return current index position\r\n      return index;\r\n    },\r\n    getNumSlides: function() {\r\n      // return total number of slides\r\n      return length;\r\n    },\r\n    kill: function() {\r\n      // cancel slideshow\r\n      stop();\r\n      // reset element\r\n      element.style.width = '';\r\n      element.style.left = '';\r\n      // reset slides\r\n      var pos = slides.length;\r\n      while(pos--) {\r\n        var slide = slides[pos];\r\n        slide.style.width = '';\r\n        slide.style.left = '';\r\n        if (browser.transitions) translate(pos, 0, 0);\r\n      }\r\n      // removed event listeners\r\n      if (browser.addEventListener) {\r\n        // remove current event listeners\r\n        element.removeEventListener('touchstart', events, false);\r\n        element.removeEventListener('webkitTransitionEnd', events, false);\r\n        element.removeEventListener('msTransitionEnd', events, false);\r\n        element.removeEventListener('oTransitionEnd', events, false);\r\n        element.removeEventListener('otransitionend', events, false);\r\n        element.removeEventListener('transitionend', events, false);\r\n        window.removeEventListener('resize', events, false);\r\n      }\r\n      else {\r\n        window.onresize = null;\r\n      }\r\n\r\n    }\r\n  }\r\n}",
    "/** @jsx React.DOM */\r\n/*\r\nconvert to pure js\r\nsave -g reactify\r\n*/\r\nvar E=React.createElement;\r\n\r\nvar hasksanagap=(typeof ksanagap!=\"undefined\");\r\nif (hasksanagap && (typeof console==\"undefined\" || typeof console.log==\"undefined\")) {\r\n\t\twindow.console={log:ksanagap.log,error:ksanagap.error,debug:ksanagap.debug,warn:ksanagap.warn};\r\n\t\tconsole.log(\"install console output funciton\");\r\n}\r\n\r\nvar checkfs=function() {\r\n\treturn (navigator && navigator.webkitPersistentStorage) || hasksanagap;\r\n}\r\nvar featurechecks={\r\n\t\"fs\":checkfs\r\n}\r\nvar checkbrowser = React.createClass({\r\n\tgetInitialState:function() {\r\n\r\n\t\tvar missingFeatures=this.getMissingFeatures();\r\n\t\treturn {ready:false, missing:missingFeatures};\r\n\t},\r\n\tgetMissingFeatures:function() {\r\n\t\tvar feature=this.props.feature.split(\",\");\r\n\t\tvar status=[];\r\n\t\tfeature.map(function(f){\r\n\t\t\tvar checker=featurechecks[f];\r\n\t\t\tif (checker) checker=checker();\r\n\t\t\tstatus.push([f,checker]);\r\n\t\t});\r\n\t\treturn status.filter(function(f){return !f[1]});\r\n\t},\r\n\tdownloadbrowser:function() {\r\n\t\twindow.location=\"https://www.google.com/chrome/\"\r\n\t},\r\n\trenderMissing:function() {\r\n\t\tvar showMissing=function(m) {\r\n\t\t\treturn E(\"div\", null, m);\r\n\t\t}\r\n\t\treturn (\r\n\t\t E(\"div\", {ref: \"dialog1\", className: \"modal fade\", \"data-backdrop\": \"static\"}, \r\n\t\t    E(\"div\", {className: \"modal-dialog\"}, \r\n\t\t      E(\"div\", {className: \"modal-content\"}, \r\n\t\t        E(\"div\", {className: \"modal-header\"}, \r\n\t\t          E(\"button\", {type: \"button\", className: \"close\", \"data-dismiss\": \"modal\", \"aria-hidden\": \"true\"}, \"\"), \r\n\t\t          E(\"h4\", {className: \"modal-title\"}, \"Browser Check\")\r\n\t\t        ), \r\n\t\t        E(\"div\", {className: \"modal-body\"}, \r\n\t\t          E(\"p\", null, \"Sorry but the following feature is missing\"), \r\n\t\t          this.state.missing.map(showMissing)\r\n\t\t        ), \r\n\t\t        E(\"div\", {className: \"modal-footer\"}, \r\n\t\t          E(\"button\", {onClick: this.downloadbrowser, type: \"button\", className: \"btn btn-primary\"}, \"Download Google Chrome\")\r\n\t\t        )\r\n\t\t      )\r\n\t\t    )\r\n\t\t  )\r\n\t\t );\r\n\t},\r\n\trenderReady:function() {\r\n\t\treturn E(\"span\", null, \"browser ok\")\r\n\t},\r\n\trender:function(){\r\n\t\treturn  (this.state.missing.length)?this.renderMissing():this.renderReady();\r\n\t},\r\n\tcomponentDidMount:function() {\r\n\t\tif (!this.state.missing.length) {\r\n\t\t\tthis.props.onReady();\r\n\t\t} else {\r\n\t\t\t$(this.refs.dialog1.getDOMNode()).modal('show');\r\n\t\t}\r\n\t}\r\n});\r\n\r\nmodule.exports=checkbrowser;",
    "\r\nvar userCancel=false;\r\nvar files=[];\r\nvar totalDownloadByte=0;\r\nvar targetPath=\"\";\r\nvar tempPath=\"\";\r\nvar nfile=0;\r\nvar baseurl=\"\";\r\nvar result=\"\";\r\nvar downloading=false;\r\nvar startDownload=function(dbid,_baseurl,_files) { //return download id\r\n\tvar fs     = require(\"fs\");\r\n\tvar path   = require(\"path\");\r\n\r\n\t\r\n\tfiles=_files.split(\"\\uffff\");\r\n\tif (downloading) return false; //only one session\r\n\tuserCancel=false;\r\n\ttotalDownloadByte=0;\r\n\tnextFile();\r\n\tdownloading=true;\r\n\tbaseurl=_baseurl;\r\n\tif (baseurl[baseurl.length-1]!='/')baseurl+='/';\r\n\ttargetPath=ksanagap.rootPath+dbid+'/';\r\n\ttempPath=ksanagap.rootPath+\".tmp/\";\r\n\tresult=\"\";\r\n\treturn true;\r\n}\r\n\r\nvar nextFile=function() {\r\n\tsetTimeout(function(){\r\n\t\tif (nfile==files.length) {\r\n\t\t\tnfile++;\r\n\t\t\tendDownload();\r\n\t\t} else {\r\n\t\t\tdownloadFile(nfile++);\t\r\n\t\t}\r\n\t},100);\r\n}\r\n\r\nvar downloadFile=function(nfile) {\r\n\tvar url=baseurl+files[nfile];\r\n\tvar tmpfilename=tempPath+files[nfile];\r\n\tvar mkdirp = require(\"./mkdirp\");\r\n\tvar fs     = require(\"fs\");\r\n\tvar http   = require(\"http\");\r\n\r\n\tmkdirp.sync(path.dirname(tmpfilename));\r\n\tvar writeStream = fs.createWriteStream(tmpfilename);\r\n\tvar datalength=0;\r\n\tvar request = http.get(url, function(response) {\r\n\t\tresponse.on('data',function(chunk){\r\n\t\t\twriteStream.write(chunk);\r\n\t\t\ttotalDownloadByte+=chunk.length;\r\n\t\t\tif (userCancel) {\r\n\t\t\t\twriteStream.end();\r\n\t\t\t\tsetTimeout(function(){nextFile();},100);\r\n\t\t\t}\r\n\t\t});\r\n\t\tresponse.on(\"end\",function() {\r\n\t\t\twriteStream.end();\r\n\t\t\tsetTimeout(function(){nextFile();},100);\r\n\t\t});\r\n\t});\r\n}\r\n\r\nvar cancelDownload=function() {\r\n\tuserCancel=true;\r\n\tendDownload();\r\n}\r\nvar verify=function() {\r\n\treturn true;\r\n}\r\nvar endDownload=function() {\r\n\tnfile=files.length+1;//stop\r\n\tresult=\"cancelled\";\r\n\tdownloading=false;\r\n\tif (userCancel) return;\r\n\tvar fs     = require(\"fs\");\r\n\tvar mkdirp = require(\"./mkdirp\");\r\n\r\n\tfor (var i=0;i<files.length;i++) {\r\n\t\tvar targetfilename=targetPath+files[i];\r\n\t\tvar tmpfilename   =tempPath+files[i];\r\n\t\tmkdirp.sync(path.dirname(targetfilename));\r\n\t\tfs.renameSync(tmpfilename,targetfilename);\r\n\t}\r\n\tif (verify()) {\r\n\t\tresult=\"success\";\r\n\t} else {\r\n\t\tresult=\"error\";\r\n\t}\r\n}\r\n\r\nvar downloadedByte=function() {\r\n\treturn totalDownloadByte;\r\n}\r\nvar doneDownload=function() {\r\n\tif (nfile>files.length) return result;\r\n\telse return \"\";\r\n}\r\nvar downloadingFile=function() {\r\n\treturn nfile-1;\r\n}\r\n\r\nvar downloader={startDownload:startDownload, downloadedByte:downloadedByte,\r\n\tdownloadingFile:downloadingFile, cancelDownload:cancelDownload,doneDownload:doneDownload};\r\nmodule.exports=downloader;",
    "/** @jsx React.DOM */\r\n\r\n/* todo , optional kdb */\r\n\r\nvar HtmlFS=require(\"./htmlfs\");\r\nvar html5fs=require(\"./html5fs\");\r\nvar CheckBrowser=require(\"./checkbrowser\");\r\nvar E=React.createElement;\r\n  \r\n\r\nvar FileList = React.createClass({\r\n\tgetInitialState:function() {\r\n\t\treturn {downloading:false,progress:0};\r\n\t},\r\n\tupdatable:function(f) {\r\n        var classes=\"btn btn-warning\";\r\n        if (this.state.downloading) classes+=\" disabled\";\r\n\t\tif (f.hasUpdate) return   E(\"button\", {className: classes, \r\n\t\t\t\"data-filename\": f.filename, \"data-url\": f.url, \r\n\t            onClick: this.download\r\n\t       }, \"Update\")\r\n\t\telse return null;\r\n\t},\r\n\tshowLocal:function(f) {\r\n        var classes=\"btn btn-danger\";\r\n        if (this.state.downloading) classes+=\" disabled\";\r\n\t  return E(\"tr\", null, E(\"td\", null, f.filename), \r\n\t      E(\"td\", null), \r\n\t      E(\"td\", {className: \"pull-right\"}, \r\n\t      this.updatable(f), E(\"button\", {className: classes, \r\n\t               onClick: this.deleteFile, \"data-filename\": f.filename}, \"Delete\")\r\n\t        \r\n\t      )\r\n\t  )\r\n\t},  \r\n\tshowRemote:function(f) { \r\n\t  var classes=\"btn btn-warning\";\r\n\t  if (this.state.downloading) classes+=\" disabled\";\r\n\t  return (E(\"tr\", {\"data-id\": f.filename}, E(\"td\", null, \r\n\t      f.filename), \r\n\t      E(\"td\", null, f.desc), \r\n\t      E(\"td\", null, \r\n\t      E(\"span\", {\"data-filename\": f.filename, \"data-url\": f.url, \r\n\t            className: classes, \r\n\t            onClick: this.download}, \"Download\")\r\n\t      )\r\n\t  ));\r\n\t},\r\n\tshowFile:function(f) {\r\n\t//\treturn <span data-id={f.filename}>{f.url}</span>\r\n\t\treturn (f.ready)?this.showLocal(f):this.showRemote(f);\r\n\t},\r\n\treloadDir:function() {\r\n\t\tthis.props.action(\"reload\");\r\n\t},\r\n\tdownload:function(e) {\r\n\t\tvar url=e.target.dataset[\"url\"];\r\n\t\tvar filename=e.target.dataset[\"filename\"];\r\n\t\tthis.setState({downloading:true,progress:0,url:url});\r\n\t\tthis.userbreak=false;\r\n\t\thtml5fs.download(url,filename,function(){\r\n\t\t\tthis.reloadDir();\r\n\t\t\tthis.setState({downloading:false,progress:1});\r\n\t\t\t},function(progress,total){\r\n\t\t\t\tif (progress==0) {\r\n\t\t\t\t\tthis.setState({message:\"total \"+total})\r\n\t\t\t \t}\r\n\t\t\t \tthis.setState({progress:progress});\r\n\t\t\t \t//if user press abort return true\r\n\t\t\t \treturn this.userbreak;\r\n\t\t\t}\r\n\t\t,this);\r\n\t},\r\n\tdeleteFile:function( e) {\r\n\t\tvar filename=e.target.attributes[\"data-filename\"].value;\r\n\t\tthis.props.action(\"delete\",filename);\r\n\t},\r\n\tallFilesReady:function(e) {\r\n\t\treturn this.props.files.every(function(f){ return f.ready});\r\n\t},\r\n\tdismiss:function() {\r\n\t\t$(this.refs.dialog1.getDOMNode()).modal('hide');\r\n\t\tthis.props.action(\"dismiss\");\r\n\t},\r\n\tabortdownload:function() {\r\n\t\tthis.userbreak=true;\r\n\t},\r\n\tshowProgress:function() {\r\n\t     if (this.state.downloading) {\r\n\t      var progress=Math.round(this.state.progress*100);\r\n\t      return (\r\n\t      \tE(\"div\", null, \r\n\t      \t\"Downloading from \", this.state.url, \r\n\t      E(\"div\", {key: \"progress\", className: \"progress col-md-8\"}, \r\n\t          E(\"div\", {className: \"progress-bar\", role: \"progressbar\", \r\n\t              \"aria-valuenow\": progress, \"aria-valuemin\": \"0\", \r\n\t              \"aria-valuemax\": \"100\", style: {width: progress+\"%\"}}, \r\n\t            progress, \"%\"\r\n\t          )\r\n\t        ), \r\n\t        E(\"button\", {onClick: this.abortdownload, \r\n\t        \tclassName: \"btn btn-danger col-md-4\"}, \"Abort\")\r\n\t        )\r\n\t        );\r\n\t      } else {\r\n\t      \t\tif ( this.allFilesReady() ) {\r\n\t      \t\t\treturn E(\"button\", {onClick: this.dismiss, className: \"btn btn-success\"}, \"Ok\")\r\n\t      \t\t} else return null;\r\n\t      \t\t\r\n\t      }\r\n\t},\r\n\tshowUsage:function() {\r\n\t\tvar percent=this.props.remainPercent;\r\n           return (E(\"div\", null, E(\"span\", {className: \"pull-left\"}, \"Usage:\"), E(\"div\", {className: \"progress\"}, \r\n\t\t  E(\"div\", {className: \"progress-bar progress-bar-success progress-bar-striped\", role: \"progressbar\", style: {width: percent+\"%\"}}, \r\n\t\t    \tpercent+\"%\"\r\n\t\t  )\r\n\t\t)));\r\n\t},\r\n\trender:function() {\r\n\t  \treturn (\r\n\t\tE(\"div\", {ref: \"dialog1\", className: \"modal fade\", \"data-backdrop\": \"static\"}, \r\n\t\t    E(\"div\", {className: \"modal-dialog\"}, \r\n\t\t      E(\"div\", {className: \"modal-content\"}, \r\n\t\t        E(\"div\", {className: \"modal-header\"}, \r\n\t\t          E(\"h4\", {className: \"modal-title\"}, \"File Installer\")\r\n\t\t        ), \r\n\t\t        E(\"div\", {className: \"modal-body\"}, \r\n\t\t        \tE(\"table\", {className: \"table\"}, \r\n\t\t        \tE(\"tbody\", null, \r\n\t\t          \tthis.props.files.map(this.showFile)\r\n\t\t          \t)\r\n\t\t          )\r\n\t\t        ), \r\n\t\t        E(\"div\", {className: \"modal-footer\"}, \r\n\t\t        \tthis.showUsage(), \r\n\t\t           this.showProgress()\r\n\t\t        )\r\n\t\t      )\r\n\t\t    )\r\n\t\t  )\r\n\t\t);\r\n\t},\t\r\n\tcomponentDidMount:function() {\r\n\t\t$(this.refs.dialog1.getDOMNode()).modal('show');\r\n\t}\r\n});\r\n/*TODO kdb check version*/\r\nvar Filemanager = React.createClass({\r\n\tgetInitialState:function() {\r\n\t\tvar quota=this.getQuota();\r\n\t\treturn {browserReady:false,noupdate:true,\trequestQuota:quota,remain:0};\r\n\t},\r\n\tgetQuota:function() {\r\n\t\tvar q=this.props.quota||\"128M\";\r\n\t\tvar unit=q[q.length-1];\r\n\t\tvar times=1;\r\n\t\tif (unit==\"M\") times=1024*1024;\r\n\t\telse if (unit=\"K\") times=1024;\r\n\t\treturn parseInt(q) * times;\r\n\t},\r\n\tmissingKdb:function() {\r\n\t\tif (ksanagap.platform!=\"chrome\") return [];\r\n\t\tvar missing=this.props.needed.filter(function(kdb){\r\n\t\t\tfor (var i in html5fs.files) {\r\n\t\t\t\tif (html5fs.files[i][0]==kdb.filename) return false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},this);\r\n\t\treturn missing;\r\n\t},\r\n\tgetRemoteUrl:function(fn) {\r\n\t\tvar f=this.props.needed.filter(function(f){return f.filename==fn});\r\n\t\tif (f.length ) return f[0].url;\r\n\t},\r\n\tgenFileList:function(existing,missing){\r\n\t\tvar out=[];\r\n\t\tfor (var i in existing) {\r\n\t\t\tvar url=this.getRemoteUrl(existing[i][0]);\r\n\t\t\tout.push({filename:existing[i][0], url :url, ready:true });\r\n\t\t}\r\n\t\tfor (var i in missing) {\r\n\t\t\tout.push(missing[i]);\r\n\t\t}\r\n\t\treturn out;\r\n\t},\r\n\treload:function() {\r\n\t\thtml5fs.readdir(function(files){\r\n  \t\t\tthis.setState({files:this.genFileList(files,this.missingKdb())});\r\n  \t\t},this);\r\n\t },\r\n\tdeleteFile:function(fn) {\r\n\t  html5fs.rm(fn,function(){\r\n\t  \tthis.reload();\r\n\t  },this);\r\n\t},\r\n\tonQuoteOk:function(quota,usage) {\r\n\t\tif (ksanagap.platform!=\"chrome\") {\r\n\t\t\t//console.log(\"onquoteok\");\r\n\t\t\tthis.setState({noupdate:true,missing:[],files:[],autoclose:true\r\n\t\t\t\t,quota:quota,remain:quota-usage,usage:usage});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t//console.log(\"quote ok\");\r\n\t\tvar files=this.genFileList(html5fs.files,this.missingKdb());\r\n\t\tvar that=this;\r\n\t\tthat.checkIfUpdate(files,function(hasupdate) {\r\n\t\t\tvar missing=this.missingKdb();\r\n\t\t\tvar autoclose=this.props.autoclose;\r\n\t\t\tif (missing.length) autoclose=false;\r\n\t\t\tthat.setState({autoclose:autoclose,\r\n\t\t\t\tquota:quota,usage:usage,files:files,\r\n\t\t\t\tmissing:missing,\r\n\t\t\t\tnoupdate:!hasupdate,\r\n\t\t\t\tremain:quota-usage});\r\n\t\t});\r\n\t},  \r\n\tonBrowserOk:function() {\r\n\t  this.totalDownloadSize();\r\n\t}, \r\n\tdismiss:function() {\r\n\t\tthis.props.onReady(this.state.usage,this.state.quota);\r\n\t\tsetTimeout(function(){\r\n\t\t\tvar modalin=$(\".modal.in\");\r\n\t\t\tif (modalin.modal) modalin.modal('hide');\r\n\t\t},500);\r\n\t}, \r\n\ttotalDownloadSize:function() {\r\n\t\tvar files=this.missingKdb();\r\n\t\tvar taskqueue=[],totalsize=0;\r\n\t\tfor (var i=0;i<files.length;i++) {\r\n\t\t\ttaskqueue.push(\r\n\t\t\t\t(function(idx){\r\n\t\t\t\t\treturn (function(data){\r\n\t\t\t\t\t\tif (!(typeof data=='object' && data.__empty)) totalsize+=data;\r\n\t\t\t\t\t\thtml5fs.getDownloadSize(files[idx].url,taskqueue.shift());\r\n\t\t\t\t\t});\r\n\t\t\t\t})(i)\r\n\t\t\t);\r\n\t\t}\r\n\t\tvar that=this;\r\n\t\ttaskqueue.push(function(data){\t\r\n\t\t\ttotalsize+=data;\r\n\t\t\tsetTimeout(function(){that.setState({requireSpace:totalsize,browserReady:true})},0);\r\n\t\t});\r\n\t\ttaskqueue.shift()({__empty:true});\r\n\t},\r\n\tcheckIfUpdate:function(files,cb) {\r\n\t\tvar taskqueue=[];\r\n\t\tfor (var i=0;i<files.length;i++) {\r\n\t\t\ttaskqueue.push(\r\n\t\t\t\t(function(idx){\r\n\t\t\t\t\treturn (function(data){\r\n\t\t\t\t\t\tif (!(typeof data=='object' && data.__empty)) files[idx-1].hasUpdate=data;\r\n\t\t\t\t\t\thtml5fs.checkUpdate(files[idx].url,files[idx].filename,taskqueue.shift());\r\n\t\t\t\t\t});\r\n\t\t\t\t})(i)\r\n\t\t\t);\r\n\t\t}\r\n\t\tvar that=this;\r\n\t\ttaskqueue.push(function(data){\t\r\n\t\t\tfiles[files.length-1].hasUpdate=data;\r\n\t\t\tvar hasupdate=files.some(function(f){return f.hasUpdate});\r\n\t\t\tif (cb) cb.apply(that,[hasupdate]);\r\n\t\t});\r\n\t\ttaskqueue.shift()({__empty:true});\r\n\t},\r\n\trender:function(){\r\n    \t\tif (!this.state.browserReady) {   \r\n      \t\t\treturn E(CheckBrowser, {feature: \"fs\", onReady: this.onBrowserOk})\r\n    \t\t} if (!this.state.quota || this.state.remain<this.state.requireSpace) {  \r\n    \t\t\tvar quota=this.state.requestQuota;\r\n    \t\t\tif (this.state.usage+this.state.requireSpace>quota) {\r\n    \t\t\t\tquota=(this.state.usage+this.state.requireSpace)*1.5;\r\n    \t\t\t}\r\n      \t\t\treturn E(HtmlFS, {quota: quota, autoclose: \"true\", onReady: this.onQuoteOk})\r\n      \t\t} else {\r\n\t\t\tif (!this.state.noupdate || this.missingKdb().length || !this.state.autoclose) {\r\n\t\t\t\tvar remain=Math.round((this.state.usage/this.state.quota)*100);\t\t\t\t\r\n\t\t\t\treturn E(FileList, {action: this.action, files: this.state.files, remainPercent: remain})\r\n\t\t\t} else {\r\n\t\t\t\tsetTimeout( this.dismiss ,0);\r\n\t\t\t\treturn E(\"span\", null, \"Success\");\r\n\t\t\t}\r\n      \t\t}\r\n\t},\r\n\taction:function() {\r\n\t  var args = Array.prototype.slice.call(arguments);\r\n\t  var type=args.shift();\r\n\t  var res=null, that=this;\r\n\t  if (type==\"delete\") {\r\n\t    this.deleteFile(args[0]);\r\n\t  }  else if (type==\"reload\") {\r\n\t  \tthis.reload();\r\n\t  } else if (type==\"dismiss\") {\r\n\t  \tthis.dismiss();\r\n\t  }\r\n\t}\r\n});\r\n\r\nmodule.exports=Filemanager;",
    "/* emulate filesystem on html5 browser */\r\nvar get_head=function(url,field,cb){\r\n\tvar xhr = new XMLHttpRequest();\r\n\txhr.open(\"HEAD\", url, true);\r\n\txhr.onreadystatechange = function() {\r\n\t\t\tif (this.readyState == this.DONE) {\r\n\t\t\t\tcb(xhr.getResponseHeader(field));\r\n\t\t\t} else {\r\n\t\t\t\tif (this.status!==200&&this.status!==206) {\r\n\t\t\t\t\tcb(\"\");\r\n\t\t\t\t}\r\n\t\t\t} \r\n\t};\r\n\txhr.send();\t\r\n}\r\nvar get_date=function(url,cb) {\r\n\tget_head(url,\"Last-Modified\",function(value){\r\n\t\tcb(value);\r\n\t});\r\n}\r\nvar get_size=function(url, cb) {\r\n\tget_head(url,\"Content-Length\",function(value){\r\n\t\tcb(parseInt(value));\r\n\t});\r\n};\r\nvar checkUpdate=function(url,fn,cb) {\r\n\tif (!url) {\r\n\t\tcb(false);\r\n\t\treturn;\r\n\t}\r\n\tget_date(url,function(d){\r\n\t\tAPI.fs.root.getFile(fn, {create: false, exclusive: false}, function(fileEntry) {\r\n\t\t\tfileEntry.getMetadata(function(metadata){\r\n\t\t\t\tvar localDate=Date.parse(metadata.modificationTime);\r\n\t\t\t\tvar urlDate=Date.parse(d);\r\n\t\t\t\tcb(urlDate>localDate);\r\n\t\t\t});\r\n\t\t},function(){\r\n\t\t\tcb(false);\r\n\t\t});\r\n\t});\r\n}\r\nvar download=function(url,fn,cb,statuscb,context) {\r\n\t var totalsize=0,batches=null,written=0;\r\n\t var fileEntry=0, fileWriter=0;\r\n\t var createBatches=function(size) {\r\n\t\tvar bytes=1024*1024, out=[];\r\n\t\tvar b=Math.floor(size / bytes);\r\n\t\tvar last=size %bytes;\r\n\t\tfor (var i=0;i<=b;i++) {\r\n\t\t\tout.push(i*bytes);\r\n\t\t}\r\n\t\tout.push(b*bytes+last);\r\n\t\treturn out;\r\n\t }\r\n\t var finish=function() {\r\n\t\t rm(fn,function(){\r\n\t\t\t\tfileEntry.moveTo(fileEntry.filesystem.root, fn,function(){\r\n\t\t\t\t\tsetTimeout( cb.bind(context,false) , 0) ; \r\n\t\t\t\t},function(e){\r\n\t\t\t\t\tconsole.log(\"failed\",e)\r\n\t\t\t\t});\r\n\t\t },this); \r\n\t };\r\n\t\tvar tempfn=\"temp.kdb\";\r\n\t\tvar batch=function(b) {\r\n\t\tvar abort=false;\r\n\t\tvar xhr = new XMLHttpRequest();\r\n\t\tvar requesturl=url+\"?\"+Math.random();\r\n\t\txhr.open('get', requesturl, true);\r\n\t\txhr.setRequestHeader('Range', 'bytes='+batches[b]+'-'+(batches[b+1]-1));\r\n\t\txhr.responseType = 'blob';    \r\n\t\txhr.addEventListener('load', function() {\r\n\t\t\tvar blob=this.response;\r\n\t\t\tfileEntry.createWriter(function(fileWriter) {\r\n\t\t\t\tfileWriter.seek(fileWriter.length);\r\n\t\t\t\tfileWriter.write(blob);\r\n\t\t\t\twritten+=blob.size;\r\n\t\t\t\tfileWriter.onwriteend = function(e) {\r\n\t\t\t\t\tif (statuscb) {\r\n\t\t\t\t\t\tabort=statuscb.apply(context,[ fileWriter.length / totalsize,totalsize ]);\r\n\t\t\t\t\t\tif (abort) setTimeout( cb.bind(context,false) , 0) ;\r\n\t\t\t\t \t}\r\n\t\t\t\t\tb++;\r\n\t\t\t\t\tif (!abort) {\r\n\t\t\t\t\t\tif (b<batches.length-1) setTimeout(batch.bind(context,b),0);\r\n\t\t\t\t\t\telse                    finish();\r\n\t\t\t\t \t}\r\n\t\t\t \t};\r\n\t\t\t}, console.error);\r\n\t\t},false);\r\n\t\txhr.send();\r\n\t}\r\n\r\n\tget_size(url,function(size){\r\n\t\ttotalsize=size;\r\n\t\tif (!size) {\r\n\t\t\tif (cb) cb.apply(context,[false]);\r\n\t\t} else {//ready to download\r\n\t\t\trm(tempfn,function(){\r\n\t\t\t\t batches=createBatches(size);\r\n\t\t\t\t if (statuscb) statuscb.apply(context,[ 0, totalsize ]);\r\n\t\t\t\t API.fs.root.getFile(tempfn, {create: 1, exclusive: false}, function(_fileEntry) {\r\n\t\t\t\t\t\t\tfileEntry=_fileEntry;\r\n\t\t\t\t\t\tbatch(0);\r\n\t\t\t\t });\r\n\t\t\t},this);\r\n\t\t}\r\n\t});\r\n}\r\n\r\nvar readFile=function(filename,cb,context) {\r\n\tAPI.fs.root.getFile(filename, function(fileEntry) {\r\n\t\t\tvar reader = new FileReader();\r\n\t\t\treader.onloadend = function(e) {\r\n\t\t\t\t\tif (cb) cb.apply(cb,[this.result]);\r\n\t\t\t\t};            \r\n\t}, console.error);\r\n}\r\nvar writeFile=function(filename,buf,cb,context){\r\n\tAPI.fs.root.getFile(filename, {create: true, exclusive: true}, function(fileEntry) {\r\n\t\t\tfileEntry.createWriter(function(fileWriter) {\r\n\t\t\t\tfileWriter.write(buf);\r\n\t\t\t\tfileWriter.onwriteend = function(e) {\r\n\t\t\t\t\tif (cb) cb.apply(cb,[buf.byteLength]);\r\n\t\t\t\t};            \r\n\t\t\t}, console.error);\r\n\t}, console.error);\r\n}\r\n\r\nvar readdir=function(cb,context) {\r\n\tvar dirReader = API.fs.root.createReader();\r\n\tvar out=[],that=this;\r\n\tdirReader.readEntries(function(entries) {\r\n\t\tif (entries.length) {\r\n\t\t\tfor (var i = 0, entry; entry = entries[i]; ++i) {\r\n\t\t\t\tif (entry.isFile) {\r\n\t\t\t\t\tout.push([entry.name,entry.toURL ? entry.toURL() : entry.toURI()]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tAPI.files=out;\r\n\t\tif (cb) cb.apply(context,[out]);\r\n\t}, function(){\r\n\t\tif (cb) cb.apply(context,[null]);\r\n\t});\r\n}\r\nvar getFileURL=function(filename) {\r\n\tif (!API.files ) return null;\r\n\tvar file= API.files.filter(function(f){return f[0]==filename});\r\n\tif (file.length) return file[0][1];\r\n}\r\nvar rm=function(filename,cb,context) {\r\n\tvar url=getFileURL(filename);\r\n\tif (url) rmURL(url,cb,context);\r\n\telse if (cb) cb.apply(context,[false]);\r\n}\r\n\r\nvar rmURL=function(filename,cb,context) {\r\n\twebkitResolveLocalFileSystemURL(filename, function(fileEntry) {\r\n\t\tfileEntry.remove(function() {\r\n\t\t\tif (cb) cb.apply(context,[true]);\r\n\t\t}, console.error);\r\n\t},  function(e){\r\n\t\tif (cb) cb.apply(context,[false]);//no such file\r\n\t});\r\n}\r\nfunction errorHandler(e) {\r\n\tconsole.error('Error: ' +e.name+ \" \"+e.message);\r\n}\r\nvar initfs=function(grantedBytes,cb,context) {\r\n\twebkitRequestFileSystem(PERSISTENT, grantedBytes,  function(fs) {\r\n\t\tAPI.fs=fs;\r\n\t\tAPI.quota=grantedBytes;\r\n\t\treaddir(function(){\r\n\t\t\tAPI.initialized=true;\r\n\t\t\tcb.apply(context,[grantedBytes,fs]);\r\n\t\t},context);\r\n\t}, errorHandler);\r\n}\r\nvar init=function(quota,cb,context) {\r\n\tnavigator.webkitPersistentStorage.requestQuota(quota, \r\n\t\t\tfunction(grantedBytes) {\r\n\t\t\t\tinitfs(grantedBytes,cb,context);\r\n\t\t}, errorHandler\r\n\t);\r\n}\r\nvar queryQuota=function(cb,context) {\r\n\tvar that=this;\r\n\tnavigator.webkitPersistentStorage.queryUsageAndQuota( \r\n\t function(usage,quota){\r\n\t\t\tinitfs(quota,function(){\r\n\t\t\t\tcb.apply(context,[usage,quota]);\r\n\t\t\t},context);\r\n\t});\r\n}\r\nvar API={\r\n\tinit:init\r\n\t,readdir:readdir\r\n\t,checkUpdate:checkUpdate\r\n\t,rm:rm\r\n\t,rmURL:rmURL\r\n\t,getFileURL:getFileURL\r\n\t,writeFile:writeFile\r\n\t,readFile:readFile\r\n\t,download:download\r\n\t,get_head:get_head\r\n\t,get_date:get_date\r\n\t,get_size:get_size\r\n\t,getDownloadSize:get_size\r\n\t,queryQuota:queryQuota\r\n}\r\nmodule.exports=API;",
    "var html5fs=require(\"./html5fs\");\r\nvar E=React.createElement;\r\n\r\nvar htmlfs = React.createClass({\r\n\tgetInitialState:function() { \r\n\t\treturn {ready:false, quota:0,usage:0,Initialized:false,autoclose:this.props.autoclose};\r\n\t},\r\n\tinitFilesystem:function() {\r\n\t\tvar quota=this.props.quota||1024*1024*128; // default 128MB\r\n\t\tquota=parseInt(quota);\r\n\t\thtml5fs.init(quota,function(q){\r\n\t\t\tthis.dialog=false;\r\n\t\t\t$(this.refs.dialog1.getDOMNode()).modal('hide');\r\n\t\t\tthis.setState({quota:q,autoclose:true});\r\n\t\t},this);\r\n\t},\r\n\twelcome:function() {\r\n\t\treturn (\r\n\t\tE(\"div\", {ref: \"dialog1\", className: \"modal fade\", id: \"myModal\", \"data-backdrop\": \"static\"}, \r\n\t\t    E(\"div\", {className: \"modal-dialog\"}, \r\n\t\t      E(\"div\", {className: \"modal-content\"}, \r\n\t\t        E(\"div\", {className: \"modal-header\"}, \r\n\t\t          E(\"h4\", {className: \"modal-title\"}, \"Welcome\")\r\n\t\t        ), \r\n\t\t        E(\"div\", {className: \"modal-body\"}, \r\n\t\t          \"Browser will ask for your confirmation.\"\r\n\t\t        ), \r\n\t\t        E(\"div\", {className: \"modal-footer\"}, \r\n\t\t          E(\"button\", {onClick: this.initFilesystem, type: \"button\", \r\n\t\t            className: \"btn btn-primary\"}, \"Initialize File System\")\r\n\t\t        )\r\n\t\t      )\r\n\t\t    )\r\n\t\t  )\r\n\t\t );\r\n\t},\r\n\trenderDefault:function(){\r\n\t\tvar used=Math.floor(this.state.usage/this.state.quota *100);\r\n\t\tvar more=function() {\r\n\t\t\tif (used>50) return E(\"button\", {type: \"button\", className: \"btn btn-primary\"}, \"Allocate More\");\r\n\t\t\telse null;\r\n\t\t}\r\n\t\treturn (\r\n\t\tE(\"div\", {ref: \"dialog1\", className: \"modal fade\", id: \"myModal\", \"data-backdrop\": \"static\"}, \r\n\t\t    E(\"div\", {className: \"modal-dialog\"}, \r\n\t\t      E(\"div\", {className: \"modal-content\"}, \r\n\t\t        E(\"div\", {className: \"modal-header\"}, \r\n\t\t          E(\"h4\", {className: \"modal-title\"}, \"Sandbox File System\")\r\n\t\t        ), \r\n\t\t        E(\"div\", {className: \"modal-body\"}, \r\n\t\t          E(\"div\", {className: \"progress\"}, \r\n\t\t            E(\"div\", {className: \"progress-bar\", role: \"progressbar\", style: {width: used+\"%\"}}, \r\n\t\t               used, \"%\"\r\n\t\t            )\r\n\t\t          ), \r\n\t\t          E(\"span\", null, this.state.quota, \" total , \", this.state.usage, \" in used\")\r\n\t\t        ), \r\n\t\t        E(\"div\", {className: \"modal-footer\"}, \r\n\t\t          E(\"button\", {onClick: this.dismiss, type: \"button\", className: \"btn btn-default\", \"data-dismiss\": \"modal\"}, \"Close\"), \r\n\t\t          more()\r\n\t\t        )\r\n\t\t      )\r\n\t\t    )\r\n\t\t  )\r\n\t\t  );\r\n\t},\r\n\tdismiss:function() {\r\n\t\tvar that=this;\r\n\t\tsetTimeout(function(){\r\n\t\t\tthat.props.onReady(that.state.quota,that.state.usage);\t\r\n\t\t},0);\r\n\t},\r\n\tqueryQuota:function() {\r\n\t\tif (ksanagap.platform==\"chrome\") {\r\n\t\t\thtml5fs.queryQuota(function(usage,quota){\r\n\t\t\t\tthis.setState({usage:usage,quota:quota,initialized:true});\r\n\t\t\t},this);\t\t\t\r\n\t\t} else {\r\n\t\t\tthis.setState({usage:333,quota:1000*1000*1024,initialized:true,autoclose:true});\r\n\t\t}\r\n\t},\r\n\trender:function() {\r\n\t\tvar that=this;\r\n\t\tif (!this.state.quota || this.state.quota<this.props.quota) {\r\n\t\t\tif (this.state.initialized) {\r\n\t\t\t\tthis.dialog=true;\r\n\t\t\t\treturn this.welcome();\t\r\n\t\t\t} else {\r\n\t\t\t\treturn E(\"span\", null, \"checking quota\");\r\n\t\t\t}\t\t\t\r\n\t\t} else {\r\n\t\t\tif (!this.state.autoclose) {\r\n\t\t\t\tthis.dialog=true;\r\n\t\t\t\treturn this.renderDefault(); \r\n\t\t\t}\r\n\t\t\tthis.dismiss();\r\n\t\t\tthis.dialog=false;\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\tcomponentDidMount:function() {\r\n\t\tif (!this.state.quota) {\r\n\t\t\tthis.queryQuota();\r\n\r\n\t\t};\r\n\t},\r\n\tcomponentDidUpdate:function() {\r\n\t\tif (this.dialog) $(this.refs.dialog1.getDOMNode()).modal('show');\r\n\t}\r\n});\r\n\r\nmodule.exports=htmlfs;",
    "var ksana={\"platform\":\"remote\"};\r\nif (typeof window!=\"undefined\") {\r\n\twindow.ksana=ksana;\r\n\tif (typeof ksanagap==\"undefined\") {\r\n\t\twindow.ksanagap=require(\"./ksanagap\"); //compatible layer with mobile\r\n\t}\r\n}\r\nif (typeof process !=\"undefined\") {\r\n\tif (process.versions && process.versions[\"node-webkit\"]) {\r\n  \t\tif (typeof nodeRequire!=\"undefined\") ksana.require=nodeRequire;\r\n  \t\tksana.platform=\"node-webkit\";\r\n  \t\twindow.ksanagap.platform=\"node-webkit\";\r\n\t\tvar ksanajs=require(\"fs\").readFileSync(\"ksana.js\",\"utf8\").trim();\r\n\t\tksana.js=JSON.parse(ksanajs.substring(14,ksanajs.length-1));\r\n\t\twindow.kfs=require(\"./kfs\");\r\n  \t}\r\n} else if (typeof chrome!=\"undefined\"){//} && chrome.fileSystem){\r\n//\twindow.ksanagap=require(\"./ksanagap\"); //compatible layer with mobile\r\n\twindow.ksanagap.platform=\"chrome\";\r\n\twindow.kfs=require(\"./kfs_html5\");\r\n\tif(window.location.origin.indexOf(\"//127.0.0.1\")>-1) {\r\n\t\trequire(\"./livereload\")();\r\n\t}\r\n\tksana.platform=\"chrome\";\r\n} else {\r\n\tif (typeof ksanagap!=\"undefined\" && typeof fs!=\"undefined\") {//mobile\r\n\t\tvar ksanajs=fs.readFileSync(\"ksana.js\",\"utf8\").trim(); //android extra \\n at the end\r\n\t\tksana.js=JSON.parse(ksanajs.substring(14,ksanajs.length-1));\r\n\t\tksana.platform=ksanagap.platform;\r\n\t\tif (typeof ksanagap.android !=\"undefined\") {\r\n\t\t\tksana.platform=\"android\";\r\n\t\t}\r\n\t}\r\n}\r\nvar timer=null;\r\nvar boot=function(appId,cb) {\r\n\tif (typeof React!=\"undefined\") {\r\n\t\tReact.initializeTouchEvents(true);\r\n\t}\r\n\tksana.appId=appId;\r\n\tif (ksanagap.platform==\"chrome\") { //need to wait for jsonp ksana.js\r\n\t\ttimer=setInterval(function(){\r\n\t\t\tif (ksana.ready){\r\n\t\t\t\tclearInterval(timer);\r\n\t\t\t\tif (ksana.js && ksana.js.files && ksana.js.files.length) {\r\n\t\t\t\t\trequire(\"./installkdb\")(ksana.js,cb);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcb();\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},300);\r\n\t} else {\r\n\t\tcb();\r\n\t}\r\n}\r\n\r\nmodule.exports={boot:boot\r\n\t,htmlfs:require(\"./htmlfs\")\r\n\t,html5fs:require(\"./html5fs\")\r\n\t,liveupdate:require(\"./liveupdate\")\r\n\t,fileinstaller:require(\"./fileinstaller\")\r\n\t,downloader:require(\"./downloader\")\r\n\t,installkdb:require(\"./installkdb\")\r\n};",
    "var Fileinstaller=require(\"./fileinstaller\");\r\n\r\nvar getRequire_kdb=function() {\r\n    var required=[];\r\n    ksana.js.files.map(function(f){\r\n      if (f.indexOf(\".kdb\")==f.length-4) {\r\n        var slash=f.lastIndexOf(\"/\");\r\n        if (slash>-1) {\r\n          var dbid=f.substring(slash+1,f.length-4);\r\n          required.push({url:f,dbid:dbid,filename:dbid+\".kdb\"});\r\n        } else {\r\n          var dbid=f.substring(0,f.length-4);\r\n          required.push({url:ksana.js.baseurl+f,dbid:dbid,filename:f});\r\n        }        \r\n      }\r\n    });\r\n    return required;\r\n}\r\nvar callback=null;\r\nvar onReady=function() {\r\n\tcallback();\r\n}\r\nvar openFileinstaller=function(keep) {\r\n\tvar require_kdb=getRequire_kdb().map(function(db){\r\n\t  return {\r\n\t    url:window.location.origin+window.location.pathname+db.dbid+\".kdb\",\r\n\t    dbdb:db.dbid,\r\n\t    filename:db.filename\r\n\t  }\r\n\t})\r\n\treturn React.createElement(Fileinstaller, {quota: \"512M\", autoclose: !keep, needed: require_kdb, \r\n\t                 onReady: onReady});\r\n}\r\nvar installkdb=function(ksanajs,cb,context) {\r\n\tReact.render(openFileinstaller(),document.getElementById(\"main\"));\r\n\tcallback=cb;\r\n}\r\nmodule.exports=installkdb;",
    "//Simulate feature in ksanagap\r\n/* \r\n  runs on node-webkit only\r\n*/\r\n\r\nvar readDir=function(path) { //simulate Ksanagap function\r\n\tvar fs=nodeRequire(\"fs\");\r\n\tpath=path||\"..\";\r\n\tvar dirs=[];\r\n\tif (path[0]==\".\") {\r\n\t\tif (path==\".\") dirs=fs.readdirSync(\".\");\r\n\t\telse {\r\n\t\t\tdirs=fs.readdirSync(\"..\");\r\n\t\t}\r\n\t} else {\r\n\t\tdirs=fs.readdirSync(path);\r\n\t}\r\n\r\n\treturn dirs.join(\"\\uffff\");\r\n}\r\nvar listApps=function() {\r\n\r\n\tvar fs=nodeRequire(\"fs\");\r\n\tvar ksanajsfile=function(d) {return \"../\"+d+\"/ksana.js\"};\r\n\tvar dirs=fs.readdirSync(\"..\").filter(function(d){\r\n\t\t\t\treturn fs.statSync(\"../\"+d).isDirectory() && d[0]!=\".\"\r\n\t\t\t\t   && fs.existsSync(ksanajsfile(d));\r\n\t});\r\n\t\r\n\tvar out=dirs.map(function(d){\r\n\r\n\t\tvar fn=ksanajsfile(d);\r\n\t\tif (!fs.existsSync(fn)) return;\r\n\t\tvar content=fs.readFileSync(fn,\"utf8\");\r\n  \t\tcontent=content.replace(\"})\",\"}\");\r\n  \t\tcontent=content.replace(\"jsonp_handler(\",\"\");\r\n  \t\ttry{\r\n  \t\t\tvar obj= JSON.parse(content);\r\n\t\t\tobj.dbid=d;\r\n\t\t\tobj.path=d;\r\n\t\t\treturn obj;\r\n  \t\t} catch(e) {\r\n  \t\t\tconsole.log(e);\r\n  \t\t\treturn null;\r\n  \t\t}\r\n\t});\r\n\r\n\tout=out.filter(function(o){return !!o});\r\n\treturn JSON.stringify(out);\r\n}\r\n\r\n\r\n\r\nvar kfs={readDir:readDir,listApps:listApps};\r\n\r\nmodule.exports=kfs;",
    "var readDir=function(){\r\n\treturn \"[]\";\r\n}\r\nvar listApps=function(){\r\n\treturn \"[]\";\r\n}\r\nmodule.exports={readDir:readDir,listApps:listApps};",
    "var appname=\"installer\";\r\nvar switchApp=function(path) {\r\n\tvar fs=require(\"fs\");\r\n\tpath=\"../\"+path;\r\n\tappname=path;\r\n\tdocument.location.href= path+\"/index.html\"; \r\n\tprocess.chdir(path);\r\n}\r\nvar downloader={};\r\nvar rootPath=\"\";\r\n\r\nvar deleteApp=function(app) {\r\n\tconsole.error(\"not allow on PC, do it in File Explorer/ Finder\");\r\n}\r\nvar username=function() {\r\n\treturn \"\";\r\n}\r\nvar useremail=function() {\r\n\treturn \"\"\r\n}\r\nvar runtime_version=function() {\r\n\treturn \"1.4\";\r\n}\r\n\r\n//copy from liveupdate\r\nvar jsonp=function(url,dbid,callback,context) {\r\n  var script=document.getElementById(\"jsonp2\");\r\n  if (script) {\r\n    script.parentNode.removeChild(script);\r\n  }\r\n  window.jsonp_handler=function(data) {\r\n    if (typeof data==\"object\") {\r\n      data.dbid=dbid;\r\n      callback.apply(context,[data]);    \r\n    }  \r\n  }\r\n  window.jsonp_error_handler=function() {\r\n    console.error(\"url unreachable\",url);\r\n    callback.apply(context,[null]);\r\n  }\r\n  script=document.createElement('script');\r\n  script.setAttribute('id', \"jsonp2\");\r\n  script.setAttribute('onerror', \"jsonp_error_handler()\");\r\n  url=url+'?'+(new Date().getTime());\r\n  script.setAttribute('src', url);\r\n  document.getElementsByTagName('head')[0].appendChild(script); \r\n}\r\n\r\nvar ksanagap={\r\n\tplatform:\"node-webkit\",\r\n\tstartDownload:downloader.startDownload,\r\n\tdownloadedByte:downloader.downloadedByte,\r\n\tdownloadingFile:downloader.downloadingFile,\r\n\tcancelDownload:downloader.cancelDownload,\r\n\tdoneDownload:downloader.doneDownload,\r\n\tswitchApp:switchApp,\r\n\trootPath:rootPath,\r\n\tdeleteApp: deleteApp,\r\n\tusername:username, //not support on PC\r\n\tuseremail:username,\r\n\truntime_version:runtime_version,\r\n\t\r\n}\r\n\r\nif (typeof process!=\"undefined\" && !process.browser) {\r\n\tvar ksanajs=require(\"fs\").readFileSync(\"./ksana.js\",\"utf8\").trim();\r\n\tdownloader=require(\"./downloader\");\r\n\t//ksana.js=JSON.parse(ksanajs.substring(14,ksanajs.length-1));\r\n\trootPath=process.cwd();\r\n\trootPath=require(\"path\").resolve(rootPath,\"..\").replace(/\\\\/g,\"/\")+'/';\r\n\tksana.ready=true;\r\n} else{\r\n\tvar url=window.location.origin+window.location.pathname.replace(\"index.html\",\"\")+\"ksana.js\";\r\n\tjsonp(url,appname,function(data){\r\n\t\tksana.js=data;\r\n\t\tksana.ready=true;\r\n\t});\r\n}\r\nmodule.exports=ksanagap;",
    "var started=false;\r\nvar timer=null;\r\nvar bundledate=null;\r\nvar get_date=require(\"./html5fs\").get_date;\r\nvar checkIfBundleUpdated=function() {\r\n\tget_date(\"bundle.js\",function(date){\r\n\t\tif (bundledate &&bundledate!=date){\r\n\t\t\tlocation.reload();\r\n\t\t}\r\n\t\tbundledate=date;\r\n\t});\r\n}\r\nvar livereload=function() {\r\n\tif (started) return;\r\n\r\n\ttimer1=setInterval(function(){\r\n\t\tcheckIfBundleUpdated();\r\n\t},2000);\r\n\tstarted=true;\r\n}\r\n\r\nmodule.exports=livereload;",
    "\r\nvar jsonp=function(url,dbid,callback,context) {\r\n  var script=document.getElementById(\"jsonp\");\r\n  if (script) {\r\n    script.parentNode.removeChild(script);\r\n  }\r\n  if (typeof dbid==\"function\") {\r\n    context=callback;\r\n    callback=dbid;\r\n    dbid=\"\";\r\n  }\r\n  window.jsonp_handler=function(data) {\r\n    //console.log(\"receive from ksana.js\",data);\r\n    if (typeof data==\"object\" && dbid) {\r\n      if (typeof data.dbid==\"undefined\") {\r\n        data.dbid=dbid;\r\n      }\r\n    }\r\n    callback.apply(context,[data]);\r\n  }\r\n\r\n  window.jsonp_error_handler=function() {\r\n    console.error(\"url unreachable\",url);\r\n    callback.apply(context,[null]);\r\n  }\r\n\r\n  script=document.createElement('script');\r\n  script.setAttribute('id', \"jsonp\");\r\n  script.setAttribute('onerror', \"jsonp_error_handler()\");\r\n  url=url+'?'+(new Date().getTime());\r\n  script.setAttribute('src', url);\r\n  document.getElementsByTagName('head')[0].appendChild(script); \r\n}\r\nvar runtime_version_ok=function(minruntime) {\r\n  if (!minruntime) return true;//not mentioned.\r\n  var min=parseFloat(minruntime);\r\n  var runtime=parseFloat( ksanagap.runtime_version()||\"1.0\");\r\n  if (min>runtime) return false;\r\n  return true;\r\n}\r\n\r\nvar needToUpdate=function(fromjson,tojson) {\r\n  var needUpdates=[];\r\n  for (var i=0;i<fromjson.length;i++) { \r\n    var to=tojson[i];\r\n    var from=fromjson[i];\r\n    var newfiles=[],newfilesizes=[],removed=[];\r\n    \r\n    if (!to || !to.files) continue; //cannot reach host\r\n    if (!runtime_version_ok(to.minruntime)) {\r\n      console.warn(\"runtime too old, need \"+to.minruntime);\r\n      continue; \r\n    }\r\n    if (!from.filedates) {\r\n      console.warn(\"missing filedates in ksana.js of \"+from.dbid);\r\n      continue;\r\n    }\r\n    from.filedates.map(function(f,idx){\r\n      var newidx=to.files.indexOf( from.files[idx]);\r\n      if (newidx==-1) {\r\n        //file removed in new version\r\n        removed.push(from.files[idx]);\r\n      } else {\r\n        var fromdate=Date.parse(f);\r\n        var todate=Date.parse(to.filedates[newidx]);\r\n        if (fromdate<todate) {\r\n          newfiles.push( to.files[newidx] );\r\n          newfilesizes.push(to.filesizes[newidx]);\r\n        }        \r\n      }\r\n    });\r\n    if (newfiles.length) {\r\n      from.newfiles=newfiles;\r\n      from.newfilesizes=newfilesizes;\r\n      from.removed=removed;\r\n      needUpdates.push(from);\r\n    }\r\n  }\r\n  return needUpdates;\r\n}\r\nvar getUpdatables=function(apps,cb,context) {\r\n  getRemoteJson(apps,function(jsons){\r\n    var hasUpdates=needToUpdate(apps,jsons);\r\n    cb.apply(context,[hasUpdates]);\r\n  },context);\r\n}\r\nvar getRemoteJson=function(apps,cb,context) {\r\n  var taskqueue=[],output=[];\r\n  var makecb=function(app){\r\n    return function(data){\r\n        if (!(data && typeof data =='object' && data.__empty)) output.push(data);\r\n        if (!app.baseurl) {\r\n          taskqueue.shift({__empty:true});\r\n        } else {\r\n          var url=app.baseurl+\"/ksana.js\";\r\n          try {\r\n            jsonp( url ,app.dbid,taskqueue.shift(), context);             \r\n          } catch(e) {\r\n            console.log(e);\r\n            taskqueue.shift({__empty:true});\r\n          }\r\n        }\r\n    };\r\n  };\r\n  apps.forEach(function(app){taskqueue.push(makecb(app))});\r\n\r\n  taskqueue.push(function(data){\r\n    output.push(data);\r\n    cb.apply(context,[output]);\r\n  });\r\n\r\n  taskqueue.shift()({__empty:true}); //run the task\r\n}\r\nvar humanFileSize=function(bytes, si) {\r\n    var thresh = si ? 1000 : 1024;\r\n    if(bytes < thresh) return bytes + ' B';\r\n    var units = si ? ['kB','MB','GB','TB','PB','EB','ZB','YB'] : ['KiB','MiB','GiB','TiB','PiB','EiB','ZiB','YiB'];\r\n    var u = -1;\r\n    do {\r\n        bytes /= thresh;\r\n        ++u;\r\n    } while(bytes >= thresh);\r\n    return bytes.toFixed(1)+' '+units[u];\r\n};\r\nvar humanDate=function(datestring) {\r\n    var d=Date.parse(datestring);\r\n    if (isNaN(d)) {\r\n      return \"invalid date\";\r\n    } else {\r\n      return new Date(d).toLocaleString();\r\n    }\r\n}\r\nvar start=function(ksanajs,cb,context){\r\n  var files=ksanajs.newfiles||ksanajs.files;\r\n  var baseurl=ksanajs.baseurl|| \"http://127.0.0.1:8080/\"+ksanajs.dbid+\"/\";\r\n  var started=ksanagap.startDownload(ksanajs.dbid,baseurl,files.join(\"\\uffff\"));\r\n  cb.apply(context,[started]);\r\n}\r\nvar status=function(){\r\n  var nfile=ksanagap.downloadingFile();\r\n  var downloadedByte=ksanagap.downloadedByte();\r\n  var done=ksanagap.doneDownload();\r\n  return {nfile:nfile,downloadedByte:downloadedByte, done:done};\r\n}\r\n\r\nvar cancel=function(){\r\n  return ksanagap.cancelDownload();\r\n}\r\n\r\nvar liveupdate={ humanFileSize: humanFileSize, humanDate:humanDate,\r\n  needToUpdate: needToUpdate , jsonp:jsonp, \r\n  getUpdatables:getUpdatables,\r\n  start:start,\r\n  cancel:cancel,\r\n  status:status\r\n  };\r\nmodule.exports=liveupdate;",
    "function mkdirP (p, mode, f, made) {\r\n     var path = nodeRequire('path');\r\n     var fs = nodeRequire('fs');\r\n\t\r\n    if (typeof mode === 'function' || mode === undefined) {\r\n        f = mode;\r\n        mode = 0x1FF & (~process.umask());\r\n    }\r\n    if (!made) made = null;\r\n\r\n    var cb = f || function () {};\r\n    if (typeof mode === 'string') mode = parseInt(mode, 8);\r\n    p = path.resolve(p);\r\n\r\n    fs.mkdir(p, mode, function (er) {\r\n        if (!er) {\r\n            made = made || p;\r\n            return cb(null, made);\r\n        }\r\n        switch (er.code) {\r\n            case 'ENOENT':\r\n                mkdirP(path.dirname(p), mode, function (er, made) {\r\n                    if (er) cb(er, made);\r\n                    else mkdirP(p, mode, cb, made);\r\n                });\r\n                break;\r\n\r\n            // In the case of any other error, just see if there's a dir\r\n            // there already.  If so, then hooray!  If not, then something\r\n            // is borked.\r\n            default:\r\n                fs.stat(p, function (er2, stat) {\r\n                    // if the stat fails, then that's super weird.\r\n                    // let the original error be the failure reason.\r\n                    if (er2 || !stat.isDirectory()) cb(er, made)\r\n                    else cb(null, made);\r\n                });\r\n                break;\r\n        }\r\n    });\r\n}\r\n\r\nmkdirP.sync = function sync (p, mode, made) {\r\n    var path = nodeRequire('path');\r\n    var fs = nodeRequire('fs');\r\n    if (mode === undefined) {\r\n        mode = 0x1FF & (~process.umask());\r\n    }\r\n    if (!made) made = null;\r\n\r\n    if (typeof mode === 'string') mode = parseInt(mode, 8);\r\n    p = path.resolve(p);\r\n\r\n    try {\r\n        fs.mkdirSync(p, mode);\r\n        made = made || p;\r\n    }\r\n    catch (err0) {\r\n        switch (err0.code) {\r\n            case 'ENOENT' :\r\n                made = sync(path.dirname(p), mode, made);\r\n                sync(p, mode, made);\r\n                break;\r\n\r\n            // In the case of any other error, just see if there's a dir\r\n            // there already.  If so, then hooray!  If not, then something\r\n            // is borked.\r\n            default:\r\n                var stat;\r\n                try {\r\n                    stat = fs.statSync(p);\r\n                }\r\n                catch (err1) {\r\n                    throw err0;\r\n                }\r\n                if (!stat.isDirectory()) throw err0;\r\n                break;\r\n        }\r\n    }\r\n\r\n    return made;\r\n};\r\n\r\nmodule.exports = mkdirP.mkdirp = mkdirP.mkdirP = mkdirP;\r\n",
    "'use strict';\n\n/**\n * Representation of a single EventEmitter function.\n *\n * @param {Function} fn Event handler to be called.\n * @param {Mixed} context Context for function execution.\n * @param {Boolean} once Only emit once\n * @api private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Minimal EventEmitter interface that is molded against the Node.js\n * EventEmitter interface.\n *\n * @constructor\n * @api public\n */\nfunction EventEmitter() { /* Nothing to set */ }\n\n/**\n * Holds the assigned EventEmitters by name.\n *\n * @type {Object}\n * @private\n */\nEventEmitter.prototype._events = undefined;\n\n/**\n * Return a list of assigned event listeners.\n *\n * @param {String} event The events that should be listed.\n * @returns {Array}\n * @api public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  if (!this._events || !this._events[event]) return [];\n  if (this._events[event].fn) return [this._events[event].fn];\n\n  for (var i = 0, l = this._events[event].length, ee = new Array(l); i < l; i++) {\n    ee[i] = this._events[event][i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Emit an event to all registered event listeners.\n *\n * @param {String} event The name of the event.\n * @returns {Boolean} Indication if we've emitted an event.\n * @api public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  if (!this._events || !this._events[event]) return false;\n\n  var listeners = this._events[event]\n    , len = arguments.length\n    , args\n    , i;\n\n  if ('function' === typeof listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Register a new EventListener for the given event.\n *\n * @param {String} event Name of the event.\n * @param {Functon} fn Callback function.\n * @param {Mixed} context The context of the function.\n * @api public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  var listener = new EE(fn, context || this);\n\n  if (!this._events) this._events = {};\n  if (!this._events[event]) this._events[event] = listener;\n  else {\n    if (!this._events[event].fn) this._events[event].push(listener);\n    else this._events[event] = [\n      this._events[event], listener\n    ];\n  }\n\n  return this;\n};\n\n/**\n * Add an EventListener that's only called once.\n *\n * @param {String} event Name of the event.\n * @param {Function} fn Callback function.\n * @param {Mixed} context The context of the function.\n * @api public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  var listener = new EE(fn, context || this, true);\n\n  if (!this._events) this._events = {};\n  if (!this._events[event]) this._events[event] = listener;\n  else {\n    if (!this._events[event].fn) this._events[event].push(listener);\n    else this._events[event] = [\n      this._events[event], listener\n    ];\n  }\n\n  return this;\n};\n\n/**\n * Remove event listeners.\n *\n * @param {String} event The event we want to remove.\n * @param {Function} fn The listener that we need to find.\n * @param {Boolean} once Only remove once listeners.\n * @api public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, once) {\n  if (!this._events || !this._events[event]) return this;\n\n  var listeners = this._events[event]\n    , events = [];\n\n  if (fn) {\n    if (listeners.fn && (listeners.fn !== fn || (once && !listeners.once))) {\n      events.push(listeners);\n    }\n    if (!listeners.fn) for (var i = 0, length = listeners.length; i < length; i++) {\n      if (listeners[i].fn !== fn || (once && !listeners[i].once)) {\n        events.push(listeners[i]);\n      }\n    }\n  }\n\n  //\n  // Reset the array, or remove it completely if we have no more listeners.\n  //\n  if (events.length) {\n    this._events[event] = events.length === 1 ? events[0] : events;\n  } else {\n    delete this._events[event];\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners or only the listeners for the specified event.\n *\n * @param {String} event The event want to remove all listeners for.\n * @api public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  if (!this._events) return this;\n\n  if (event) delete this._events[event];\n  else this._events = {};\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// This function doesn't apply anymore.\n//\nEventEmitter.prototype.setMaxListeners = function setMaxListeners() {\n  return this;\n};\n\n//\n// Expose the module.\n//\nEventEmitter.EventEmitter = EventEmitter;\nEventEmitter.EventEmitter2 = EventEmitter;\nEventEmitter.EventEmitter3 = EventEmitter;\n\n//\n// Expose the module.\n//\nmodule.exports = EventEmitter;\n",
    "/**\n * A module of methods that you want to include in all actions.\n * This module is consumed by `createAction`.\n */\nmodule.exports = {\n};\n",
    "exports.createdStores = [];\n\nexports.createdActions = [];\n\nexports.reset = function() {\n    while(exports.createdStores.length) {\n        exports.createdStores.pop();\n    }\n    while(exports.createdActions.length) {\n        exports.createdActions.pop();\n    }\n};\n",
    "var _ = require('./utils'),\n    maker = require('./joins').instanceJoinCreator;\n\n/**\n * A module of methods related to listening.\n */\nmodule.exports = {\n\n    /**\n     * An internal utility function used by `validateListening`\n     *\n     * @param {Action|Store} listenable The listenable we want to search for\n     * @returns {Boolean} The result of a recursive search among `this.subscriptions`\n     */\n    hasListener: function(listenable) {\n        var i = 0, j, listener, listenables;\n        for (;i < (this.subscriptions||[]).length; ++i) {\n            listenables = [].concat(this.subscriptions[i].listenable);\n            for (j = 0; j < listenables.length; j++){\n                listener = listenables[j];\n                if (listener === listenable || listener.hasListener && listener.hasListener(listenable)) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    },\n\n    /**\n     * A convenience method that listens to all listenables in the given object.\n     *\n     * @param {Object} listenables An object of listenables. Keys will be used as callback method names.\n     */\n    listenToMany: function(listenables){\n        for(var key in listenables){\n            var cbname = _.callbackName(key),\n                localname = this[cbname] ? cbname : this[key] ? key : undefined;\n            if (localname){\n                this.listenTo(listenables[key],localname,this[cbname+\"Default\"]||this[localname+\"Default\"]||localname);\n            }\n        }\n    },\n\n    /**\n     * Checks if the current context can listen to the supplied listenable\n     *\n     * @param {Action|Store} listenable An Action or Store that should be\n     *  listened to.\n     * @returns {String|Undefined} An error message, or undefined if there was no problem.\n     */\n    validateListening: function(listenable){\n        if (listenable === this) {\n            return \"Listener is not able to listen to itself\";\n        }\n        if (!_.isFunction(listenable.listen)) {\n            return listenable + \" is missing a listen method\";\n        }\n        if (listenable.hasListener && listenable.hasListener(this)) {\n            return \"Listener cannot listen to this listenable because of circular loop\";\n        }\n    },\n\n    /**\n     * Sets up a subscription to the given listenable for the context object\n     *\n     * @param {Action|Store} listenable An Action or Store that should be\n     *  listened to.\n     * @param {Function|String} callback The callback to register as event handler\n     * @param {Function|String} defaultCallback The callback to register as default handler\n     * @returns {Object} A subscription obj where `stop` is an unsub function and `listenable` is the object being listened to\n     */\n    listenTo: function(listenable, callback, defaultCallback) {\n        var desub, unsubscriber, subscriptionobj, subs = this.subscriptions = this.subscriptions || [];\n        _.throwIf(this.validateListening(listenable));\n        this.fetchInitialState(listenable, defaultCallback);\n        desub = listenable.listen(this[callback]||callback, this);\n        unsubscriber = function() {\n            var index = subs.indexOf(subscriptionobj);\n            _.throwIf(index === -1,'Tried to remove listen already gone from subscriptions list!');\n            subs.splice(index, 1);\n            desub();\n        };\n        subscriptionobj = {\n            stop: unsubscriber,\n            listenable: listenable\n        };\n        subs.push(subscriptionobj);\n        return subscriptionobj;\n    },\n\n    /**\n     * Stops listening to a single listenable\n     *\n     * @param {Action|Store} listenable The action or store we no longer want to listen to\n     * @returns {Boolean} True if a subscription was found and removed, otherwise false.\n     */\n    stopListeningTo: function(listenable){\n        var sub, i = 0, subs = this.subscriptions || [];\n        for(;i < subs.length; i++){\n            sub = subs[i];\n            if (sub.listenable === listenable){\n                sub.stop();\n                _.throwIf(subs.indexOf(sub)!==-1,'Failed to remove listen from subscriptions list!');\n                return true;\n            }\n        }\n        return false;\n    },\n\n    /**\n     * Stops all subscriptions and empties subscriptions array\n     */\n    stopListeningToAll: function(){\n        var remaining, subs = this.subscriptions || [];\n        while((remaining=subs.length)){\n            subs[0].stop();\n            _.throwIf(subs.length!==remaining-1,'Failed to remove listen from subscriptions list!');\n        }\n    },\n\n    /**\n     * Used in `listenTo`. Fetches initial data from a publisher if it has a `getInitialState` method.\n     * @param {Action|Store} listenable The publisher we want to get initial state from\n     * @param {Function|String} defaultCallback The method to receive the data\n     */\n    fetchInitialState: function (listenable, defaultCallback) {\n        defaultCallback = (defaultCallback && this[defaultCallback]) || defaultCallback;\n        var me = this;\n        if (_.isFunction(defaultCallback) && _.isFunction(listenable.getInitialState)) {\n            data = listenable.getInitialState();\n            if (data && _.isFunction(data.then)) {\n                data.then(function() {\n                    defaultCallback.apply(me, arguments);\n                });\n            } else {\n                defaultCallback.call(this, data);\n            }\n        }\n    },\n\n    /**\n     * The callback will be called once all listenables have triggered at least once.\n     * It will be invoked with the last emission from each listenable.\n     * @param {...Publishers} publishers Publishers that should be tracked.\n     * @param {Function|String} callback The method to call when all publishers have emitted\n     * @returns {Object} A subscription obj where `stop` is an unsub function and `listenable` is an array of listenables\n     */\n    joinTrailing: maker(\"last\"),\n\n    /**\n     * The callback will be called once all listenables have triggered at least once.\n     * It will be invoked with the first emission from each listenable.\n     * @param {...Publishers} publishers Publishers that should be tracked.\n     * @param {Function|String} callback The method to call when all publishers have emitted\n     * @returns {Object} A subscription obj where `stop` is an unsub function and `listenable` is an array of listenables\n     */\n    joinLeading: maker(\"first\"),\n\n    /**\n     * The callback will be called once all listenables have triggered at least once.\n     * It will be invoked with all emission from each listenable.\n     * @param {...Publishers} publishers Publishers that should be tracked.\n     * @param {Function|String} callback The method to call when all publishers have emitted\n     * @returns {Object} A subscription obj where `stop` is an unsub function and `listenable` is an array of listenables\n     */\n    joinConcat: maker(\"all\"),\n\n    /**\n     * The callback will be called once all listenables have triggered.\n     * If a callback triggers twice before that happens, an error is thrown.\n     * @param {...Publishers} publishers Publishers that should be tracked.\n     * @param {Function|String} callback The method to call when all publishers have emitted\n     * @returns {Object} A subscription obj where `stop` is an unsub function and `listenable` is an array of listenables\n     */\n    joinStrict: maker(\"strict\")\n};\n",
    "var _ = require('./utils'),\n    ListenerMethods = require('./ListenerMethods');\n\n/**\n * A module meant to be consumed as a mixin by a React component. Supplies the methods from\n * `ListenerMethods` mixin and takes care of teardown of subscriptions.\n * Note that if you're using the `connect` mixin you don't need this mixin, as connect will\n * import everything this mixin contains!\n */\nmodule.exports = _.extend({\n\n    /**\n     * Cleans up all listener previously registered.\n     */\n    componentWillUnmount: ListenerMethods.stopListeningToAll\n\n}, ListenerMethods);\n",
    "var _ = require('./utils');\n\n/**\n * A module of methods for object that you want to be able to listen to.\n * This module is consumed by `createStore` and `createAction`\n */\nmodule.exports = {\n\n    /**\n     * Hook used by the publisher that is invoked before emitting\n     * and before `shouldEmit`. The arguments are the ones that the action\n     * is invoked with. If this function returns something other than\n     * undefined, that will be passed on as arguments for shouldEmit and\n     * emission.\n     */\n    preEmit: function() {},\n\n    /**\n     * Hook used by the publisher after `preEmit` to determine if the\n     * event should be emitted with given arguments. This may be overridden\n     * in your application, default implementation always returns true.\n     *\n     * @returns {Boolean} true if event should be emitted\n     */\n    shouldEmit: function() { return true; },\n\n    /**\n     * Subscribes the given callback for action triggered\n     *\n     * @param {Function} callback The callback to register as event handler\n     * @param {Mixed} [optional] bindContext The context to bind the callback with\n     * @returns {Function} Callback that unsubscribes the registered event handler\n     */\n    listen: function(callback, bindContext) {\n        var eventHandler = function(args) {\n            callback.apply(bindContext, args);\n        }, me = this;\n        this.emitter.addListener(this.eventLabel, eventHandler);\n        return function() {\n            me.emitter.removeListener(me.eventLabel, eventHandler);\n        };\n    },\n\n    /**\n     * Publishes an event using `this.emitter` (if `shouldEmit` agrees)\n     */\n    trigger: function() {\n        var args = arguments,\n            pre = this.preEmit.apply(this, args);\n        args = pre === undefined ? args : _.isArguments(pre) ? pre : [].concat(pre);\n        if (this.shouldEmit.apply(this, args)) {\n            this.emitter.emit(this.eventLabel, args);\n        }\n    },\n\n    /**\n     * Tries to publish the event on the next tick\n     */\n    triggerAsync: function(){\n        var args = arguments,me = this;\n        _.nextTick(function() {\n            me.trigger.apply(me, args);\n        });\n    }\n};\n",
    "/**\n * A module of methods that you want to include in all stores.\n * This module is consumed by `createStore`.\n */\nmodule.exports = {\n};\n",
    "module.exports = function(store, definition) {\n  for (var name in definition) {\n    var property = definition[name];\n\n    if (typeof property !== 'function' || !definition.hasOwnProperty(name)) {\n      continue;\n    }\n\n    store[name] = property.bind(store);\n  }\n\n  return store;\n};\n",
    "var Reflux = require('../src'),\n    _ = require('./utils');\n\nmodule.exports = function(listenable,key){\n    return {\n        getInitialState: function(){\n            if (!_.isFunction(listenable.getInitialState)) {\n                return {};\n            } else if (key === undefined) {\n                return listenable.getInitialState();\n            } else {\n                return _.object([key],[listenable.getInitialState()]);\n            }\n        },\n        componentDidMount: function(){\n            _.extend(this,Reflux.ListenerMethods);\n            var me = this, cb = (key === undefined ? this.setState : function(v){me.setState(_.object([key],[v]));});\n            this.listenTo(listenable,cb);\n        },\n        componentWillUnmount: Reflux.ListenerMixin.componentWillUnmount\n    };\n};\n",
    "var _ = require('./utils'),\n    Reflux = require('../src'),\n    Keep = require('./Keep'),\n    allowed = {preEmit:1,shouldEmit:1};\n\n/**\n * Creates an action functor object. It is mixed in with functions\n * from the `PublisherMethods` mixin. `preEmit` and `shouldEmit` may\n * be overridden in the definition object.\n *\n * @param {Object} definition The action object definition\n */\nmodule.exports = function(definition) {\n\n    definition = definition || {};\n\n    for(var a in Reflux.ActionMethods){\n        if (!allowed[a] && Reflux.PublisherMethods[a]) {\n            throw new Error(\"Cannot override API method \" + a +\n                \" in Reflux.ActionMethods. Use another method name or override it on Reflux.PublisherMethods instead.\"\n            );\n        }\n    }\n\n    for(var d in definition){\n        if (!allowed[d] && Reflux.PublisherMethods[d]) {\n            throw new Error(\"Cannot override API method \" + d +\n                \" in action creation. Use another method name or override it on Reflux.PublisherMethods instead.\"\n            );\n        }\n    }\n\n    var context = _.extend({\n        eventLabel: \"action\",\n        emitter: new _.EventEmitter(),\n        _isAction: true\n    }, Reflux.PublisherMethods, Reflux.ActionMethods, definition);\n\n    var functor = function() {\n        functor[functor.sync?\"trigger\":\"triggerAsync\"].apply(functor, arguments);\n    };\n\n    _.extend(functor,context);\n\n    Keep.createdActions.push(functor);\n\n    return functor;\n\n};\n",
    "var _ = require('./utils'),\n    Reflux = require('../src'),\n    Keep = require('./Keep'),\n    allowed = {preEmit:1,shouldEmit:1},\n    bindMethods = require('./bindMethods');\n\n/**\n * Creates an event emitting Data Store. It is mixed in with functions\n * from the `ListenerMethods` and `PublisherMethods` mixins. `preEmit`\n * and `shouldEmit` may be overridden in the definition object.\n *\n * @param {Object} definition The data store object definition\n * @returns {Store} A data store instance\n */\nmodule.exports = function(definition) {\n\n    definition = definition || {};\n\n    for(var a in Reflux.StoreMethods){\n        if (!allowed[a] && (Reflux.PublisherMethods[a] || Reflux.ListenerMethods[a])){\n            throw new Error(\"Cannot override API method \" + a + \n                \" in Reflux.StoreMethods. Use another method name or override it on Reflux.PublisherMethods / Reflux.ListenerMethods instead.\"\n            );\n        }\n    }\n\n    for(var d in definition){\n        if (!allowed[d] && (Reflux.PublisherMethods[d] || Reflux.ListenerMethods[d])){\n            throw new Error(\"Cannot override API method \" + d + \n                \" in store creation. Use another method name or override it on Reflux.PublisherMethods / Reflux.ListenerMethods instead.\"\n            );\n        }\n    }\n\n    function Store() {\n        var i=0, arr;\n        this.subscriptions = [];\n        this.emitter = new _.EventEmitter();\n        this.eventLabel = \"change\";\n        if (this.init && _.isFunction(this.init)) {\n            this.init();\n        }\n        if (this.listenables){\n            arr = [].concat(this.listenables);\n            for(;i < arr.length;i++){\n                this.listenToMany(arr[i]);\n            }\n        }\n    }\n\n    _.extend(Store.prototype, Reflux.ListenerMethods, Reflux.PublisherMethods, Reflux.StoreMethods, definition);\n\n    var store = new Store();\n    bindMethods(store, definition);\n    Keep.createdStores.push(store);\n\n    return store;\n};\n",
    "exports.ActionMethods = require('./ActionMethods');\n\nexports.ListenerMethods = require('./ListenerMethods');\n\nexports.PublisherMethods = require('./PublisherMethods');\n\nexports.StoreMethods = require('./StoreMethods');\n\nexports.createAction = require('./createAction');\n\nexports.createStore = require('./createStore');\n\nexports.connect = require('./connect');\n\nexports.ListenerMixin = require('./ListenerMixin');\n\nexports.listenTo = require('./listenTo');\n\nexports.listenToMany = require('./listenToMany');\n\n\nvar maker = require('./joins').staticJoinCreator;\n\nexports.joinTrailing = exports.all = maker(\"last\"); // Reflux.all alias for backward compatibility\n\nexports.joinLeading = maker(\"first\");\n\nexports.joinStrict = maker(\"strict\");\n\nexports.joinConcat = maker(\"all\");\n\n\n/**\n * Convenience function for creating a set of actions\n *\n * @param actionNames the names for the actions to be created\n * @returns an object with actions of corresponding action names\n */\nexports.createActions = function(actionNames) {\n    var i = 0, actions = {};\n    for (; i < actionNames.length; i++) {\n        actions[actionNames[i]] = exports.createAction();\n    }\n    return actions;\n};\n\n/**\n * Sets the eventmitter that Reflux uses\n */\nexports.setEventEmitter = function(ctx) {\n    var _ = require('./utils');\n    _.EventEmitter = ctx;\n};\n\n/**\n * Sets the method used for deferring actions and stores\n */\nexports.nextTick = function(nextTick) {\n    var _ = require('./utils');\n    _.nextTick = nextTick;\n};\n\n/**\n * Provides the set of created actions and stores for introspection\n */\nexports.__keep = require('./Keep');\n\n/**\n * Warn if Function.prototype.bind not available\n */\nif (!Function.prototype.bind) {\n  console.error(\n    'Function.prototype.bind not available. ' +\n    'ES5 shim required. ' +\n    'https://github.com/spoike/refluxjs#es5'\n  );\n}\n",
    "/**\n * Internal module used to create static and instance join methods\n */\n\nvar slice = Array.prototype.slice,\n    _ = require(\"./utils\"),\n    createStore = require(\"./createStore\"),\n    strategyMethodNames = {\n        strict: \"joinStrict\",\n        first: \"joinLeading\",\n        last: \"joinTrailing\",\n        all: \"joinConcat\"\n    };\n\n/**\n * Used in `index.js` to create the static join methods\n * @param {String} strategy Which strategy to use when tracking listenable trigger arguments\n * @returns {Function} A static function which returns a store with a join listen on the given listenables using the given strategy\n */\nexports.staticJoinCreator = function(strategy){\n    return function(/* listenables... */) {\n        var listenables = slice.call(arguments);\n        return createStore({\n            init: function(){\n                this[strategyMethodNames[strategy]].apply(this,listenables.concat(\"triggerAsync\"));\n            }\n        });\n    };\n};\n\n/**\n * Used in `ListenerMethods.js` to create the instance join methods\n * @param {String} strategy Which strategy to use when tracking listenable trigger arguments\n * @returns {Function} An instance method which sets up a join listen on the given listenables using the given strategy\n */\nexports.instanceJoinCreator = function(strategy){\n    return function(/* listenables..., callback*/){\n        _.throwIf(arguments.length < 3,'Cannot create a join with less than 2 listenables!');\n        var listenables = slice.call(arguments),\n            callback = listenables.pop(),\n            numberOfListenables = listenables.length,\n            join = {\n                numberOfListenables: numberOfListenables,\n                callback: this[callback]||callback,\n                listener: this,\n                strategy: strategy\n            }, i, cancels = [], subobj;\n        for (i = 0; i < numberOfListenables; i++) {\n            _.throwIf(this.validateListening(listenables[i]));\n        }\n        for (i = 0; i < numberOfListenables; i++) {\n            cancels.push(listenables[i].listen(newListener(i,join),this));\n        }\n        reset(join);\n        subobj = {listenable: listenables};\n        subobj.stop = makeStopper(subobj,cancels,this);\n        this.subscriptions = (this.subscriptions || []).concat(subobj);\n        return subobj;\n    };\n};\n\n// ---- internal join functions ----\n\nfunction makeStopper(subobj,cancels,context){\n    return function() {\n        var i, subs = context.subscriptions;\n            index = (subs ? subs.indexOf(subobj) : -1);\n        _.throwIf(index === -1,'Tried to remove join already gone from subscriptions list!');\n        for(i=0;i < cancels.length; i++){\n            cancels[i]();\n        }\n        subs.splice(index, 1);\n    };\n}\n\nfunction reset(join) {\n    join.listenablesEmitted = new Array(join.numberOfListenables);\n    join.args = new Array(join.numberOfListenables);\n}\n\nfunction newListener(i,join) {\n    return function() {\n        var callargs = slice.call(arguments);\n        if (join.listenablesEmitted[i]){\n            switch(join.strategy){\n                case \"strict\": throw new Error(\"Strict join failed because listener triggered twice.\");\n                case \"last\": join.args[i] = callargs; break;\n                case \"all\": join.args[i].push(callargs);\n            }\n        } else {\n            join.listenablesEmitted[i] = true;\n            join.args[i] = (join.strategy===\"all\"?[callargs]:callargs);\n        }\n        emitIfAllListenablesEmitted(join);\n    };\n}\n\nfunction emitIfAllListenablesEmitted(join) {\n    for (var i = 0; i < join.numberOfListenables; i++) {\n        if (!join.listenablesEmitted[i]) {\n            return;\n        }\n    }\n    join.callback.apply(join.listener,join.args);\n    reset(join);\n}\n",
    "var Reflux = require('../src');\n\n\n/**\n * A mixin factory for a React component. Meant as a more convenient way of using the `ListenerMixin`,\n * without having to manually set listeners in the `componentDidMount` method.\n *\n * @param {Action|Store} listenable An Action or Store that should be\n *  listened to.\n * @param {Function|String} callback The callback to register as event handler\n * @param {Function|String} defaultCallback The callback to register as default handler\n * @returns {Object} An object to be used as a mixin, which sets up the listener for the given listenable.\n */\nmodule.exports = function(listenable,callback,initial){\n    return {\n        /**\n         * Set up the mixin before the initial rendering occurs. Import methods from `ListenerMethods`\n         * and then make the call to `listenTo` with the arguments provided to the factory function\n         */\n        componentDidMount: function() {\n            for(var m in Reflux.ListenerMethods){\n                if (this[m] !== Reflux.ListenerMethods[m]){\n                    if (this[m]){\n                        throw \"Can't have other property '\"+m+\"' when using Reflux.listenTo!\";\n                    }\n                    this[m] = Reflux.ListenerMethods[m];\n                }\n            }\n            this.listenTo(listenable,callback,initial);\n        },\n        /**\n         * Cleans up all listener previously registered.\n         */\n        componentWillUnmount: Reflux.ListenerMethods.stopListeningToAll\n    };\n};\n",
    "var Reflux = require('../src');\n\n/**\n * A mixin factory for a React component. Meant as a more convenient way of using the `listenerMixin`,\n * without having to manually set listeners in the `componentDidMount` method. This version is used\n * to automatically set up a `listenToMany` call.\n *\n * @param {Object} listenables An object of listenables\n * @returns {Object} An object to be used as a mixin, which sets up the listeners for the given listenables.\n */\nmodule.exports = function(listenables){\n    return {\n        /**\n         * Set up the mixin before the initial rendering occurs. Import methods from `ListenerMethods`\n         * and then make the call to `listenTo` with the arguments provided to the factory function\n         */\n        componentDidMount: function() {\n            for(var m in Reflux.ListenerMethods){\n                if (this[m] !== Reflux.ListenerMethods[m]){\n                    if (this[m]){\n                        throw \"Can't have other property '\"+m+\"' when using Reflux.listenToMany!\";\n                    }\n                    this[m] = Reflux.ListenerMethods[m];\n                }\n            }\n            this.listenToMany(listenables);\n        },\n        /**\n         * Cleans up all listener previously registered.\n         */\n        componentWillUnmount: Reflux.ListenerMethods.stopListeningToAll\n    };\n};\n",
    "/*\n * isObject, extend, isFunction, isArguments are taken from undescore/lodash in\n * order to remove the dependency\n */\nvar isObject = exports.isObject = function(obj) {\n    var type = typeof obj;\n    return type === 'function' || type === 'object' && !!obj;\n};\n\nexports.extend = function(obj) {\n    if (!isObject(obj)) {\n        return obj;\n    }\n    var source, prop;\n    for (var i = 1, length = arguments.length; i < length; i++) {\n        source = arguments[i];\n        for (prop in source) {\n            obj[prop] = source[prop];\n        }\n    }\n    return obj;\n};\n\nexports.isFunction = function(value) {\n    return typeof value === 'function';\n};\n\nexports.EventEmitter = require('eventemitter3');\n\nexports.nextTick = function(callback) {\n    setTimeout(callback, 0);\n};\n\nexports.callbackName = function(string){\n    return \"on\"+string.charAt(0).toUpperCase()+string.slice(1);\n};\n\nexports.object = function(keys,vals){\n    var o={}, i=0;\n    for(;i<keys.length;i++){\n        o[keys[i]] = vals[i];\n    }\n    return o;\n};\n\nexports.isArguments = function(value) {\n    return value && typeof value == 'object' && typeof value.length == 'number' &&\n      (toString.call(value) === '[object Arguments]' || (hasOwnProperty.call(value, 'callee' && !propertyIsEnumerable.call(value, 'callee')))) || false;\n};\n\nexports.throwIf = function(val,msg){\n    if (val){\n        throw Error(msg||val);\n    }\n};\n"
  ]
}